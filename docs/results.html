<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>CDC Causes of Death - 3&nbsp; Results</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./d3graph.html" rel="next">
<link href="./data.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./results.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Results</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">CDC Causes of Death</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/eenterprises1/cdc" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./results.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Results</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./d3graph.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Interactive graph</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">5. Conclusion</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#preliminary-analysis---aggregate-numbers" id="toc-preliminary-analysis---aggregate-numbers" class="nav-link active" data-scroll-target="#preliminary-analysis---aggregate-numbers"><span class="header-section-number">3.1</span> Preliminary Analysis - Aggregate Numbers</a>
  <ul class="collapse">
  <li><a href="#main-causes" id="toc-main-causes" class="nav-link" data-scroll-target="#main-causes"><span class="header-section-number">3.1.1</span> Main Causes</a></li>
  <li><a href="#understanding-overall-trends" id="toc-understanding-overall-trends" class="nav-link" data-scroll-target="#understanding-overall-trends"><span class="header-section-number">3.1.2</span> Understanding overall trends</a></li>
  <li><a href="#understanding-the-underlying-causes-of-death" id="toc-understanding-the-underlying-causes-of-death" class="nav-link" data-scroll-target="#understanding-the-underlying-causes-of-death"><span class="header-section-number">3.1.3</span> Understanding the underlying causes of death</a></li>
  <li><a href="#disaggregating-by-state" id="toc-disaggregating-by-state" class="nav-link" data-scroll-target="#disaggregating-by-state"><span class="header-section-number">3.1.4</span> Disaggregating by state</a></li>
  <li><a href="#analyzing-alzheimers-disease" id="toc-analyzing-alzheimers-disease" class="nav-link" data-scroll-target="#analyzing-alzheimers-disease"><span class="header-section-number">3.1.5</span> Analyzing Alzheimer’s Disease</a></li>
  <li><a href="#analyzing-unintentional-injuries" id="toc-analyzing-unintentional-injuries" class="nav-link" data-scroll-target="#analyzing-unintentional-injuries"><span class="header-section-number">3.1.6</span> Analyzing Unintentional Injuries</a></li>
  <li><a href="#analyzing-suicide" id="toc-analyzing-suicide" class="nav-link" data-scroll-target="#analyzing-suicide"><span class="header-section-number">3.1.7</span> Analyzing Suicide</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/eenterprises1/cdc/edit/main/results.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/eenterprises1/cdc/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Results</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p><em>Instructions:</em> <em>You have a lot of freedom to choose what to do, as long as you restrict yourselves to exploratory techniques (rather than modeling / prediction approaches). In addition, your analysis must be clearly documented and reproducible.</em></p>
<p><em>Provide a short nontechnical summary of the most revealing findings of your analysis written for a nontechnical audience. Take extra care to clean up your graphs, ensuring that best practices for presentation are followed, as described in the audience ready style section below.</em></p>
<p><em>Use subheadings (##) as appropriate. See Todd Schneider’s blog posts for examples of thoughtful, informative subheadings. An approach that works well is to create a subheading for each of your research questions.</em></p>
<p><em>The number of graphs will vary by project; we suggest a target of 10. (A plot with multiple facets counts as 1 graph). If you go over, make sure they are high quality and include commentary. A project with 10 good graphs plus commentary will receive a better grade than a project with 10 good graphs and 10 mediocre ones.</em></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(maps)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="preliminary-analysis---aggregate-numbers" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="preliminary-analysis---aggregate-numbers"><span class="header-section-number">3.1</span> Preliminary Analysis - Aggregate Numbers</h2>
<section id="main-causes" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="main-causes"><span class="header-section-number">3.1.1</span> Main Causes</h3>
<p>First, we will get the dataset ready for analysis.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#We begin by loading the dataframe and renaming some columns for easier handling</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>cdc_dataset <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">"NCHS_Leading_Causes_of_Death_United_States_2020.csv"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>cdc_dataset <span class="ot">&lt;-</span> cdc_dataset <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">Cause =</span> <span class="st">`</span><span class="at">Cause Name</span><span class="st">`</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>cdc_dataset <span class="ot">&lt;-</span> cdc_dataset <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">Age_Adj_Rate =</span> <span class="st">`</span><span class="at">Age Adjusted Rate</span><span class="st">`</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>cdc_dataset <span class="ot">&lt;-</span> cdc_dataset <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">Crude_Rate =</span> <span class="st">`</span><span class="at">Crude Rate</span><span class="st">`</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Replacing NA with zero in all columns as mentioned in the previous section</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>cdc_dataset <span class="ot">&lt;-</span> cdc_dataset <span class="sc">|&gt;</span> <span class="fu">mutate_all</span>(<span class="sc">~</span><span class="fu">ifelse</span>(<span class="fu">is.na</span>(.), <span class="dv">0</span>, .))</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co">#We will not use '113 Cause Name' but 'Cause Name'</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>cdc_dataset <span class="ot">&lt;-</span> cdc_dataset <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="sc">-</span><span class="st">`</span><span class="at">113 Cause Name</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We will select the 10 most important causes of death from a historical perspective in the United States.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>cdc_usa <span class="ot">&lt;-</span> cdc_dataset[cdc_dataset<span class="sc">$</span>State <span class="sc">==</span> <span class="st">"United States"</span>, ]</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Detecting the top 10 most important causes of death in the US from 1999 to 2020</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>cdc_usa_summary <span class="ot">&lt;-</span> cdc_usa <span class="sc">|&gt;</span> <span class="fu">group_by</span>(Cause) <span class="sc">|&gt;</span> <span class="fu">summarize</span>(<span class="at">Total_Deaths =</span> <span class="fu">sum</span>(Deaths)) <span class="sc">|&gt;</span> </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Total_Deaths)) <span class="sc">|&gt;</span> <span class="fu">top_n</span>(<span class="dv">10</span>, Total_Deaths)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating the bar chart for top 10 causes</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cdc_usa_summary, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Cause, Total_Deaths), <span class="at">y =</span> Total_Deaths)) <span class="sc">+</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">'#8B4513'</span>) <span class="sc">+</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Most Relevant Causes of Death - 1999 to 2020"</span>, <span class="at">y =</span> <span class="st">"Total Number of Deaths (Millions)"</span>, <span class="at">x =</span> <span class="st">"Cause Name"</span>) <span class="sc">+</span> </span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">comma_format</span>(<span class="at">scale =</span> <span class="fl">1e-6</span>), <span class="at">breaks =</span> scales<span class="sc">::</span><span class="fu">pretty_breaks</span>(<span class="at">n =</span> <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>The bar chart above identifies 10 most common causes of death in the United States aggregated from year 1999 to 2020. It’s is visible that heart disease and cancer account for a significant bulk of all deaths. We will focus our analysis on these.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Filtering cdc_dataset by the top 10 Cause Name from cdc_usa_summary</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>cdc_dataset <span class="ot">&lt;-</span> cdc_dataset[cdc_dataset<span class="sc">$</span>Cause <span class="sc">%in%</span>  cdc_usa_summary<span class="sc">$</span>Cause, ]</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>cdc_usa  <span class="ot">&lt;-</span> cdc_usa[cdc_usa<span class="sc">$</span>Cause <span class="sc">%in%</span>  cdc_usa_summary<span class="sc">$</span>Cause, ]</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># rm(cdc_usa_summary)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Notice that the deaths incorporated in these 10 categories, are almost 90% of the total figure of deaths.</p>
</section>
<section id="understanding-overall-trends" class="level3" data-number="3.1.2">
<h3 data-number="3.1.2" class="anchored" data-anchor-id="understanding-overall-trends"><span class="header-section-number">3.1.2</span> Understanding overall trends</h3>
<p>As population grows, deaths (with a lag) will eventually grow. We would like to understand the interplay between population growth, deaths growth, and the evolution of death rates since 1999. For this, we will create metrics and facet them in time series.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Grouping by Year and State, and summarizing the data. We can take min(Population) to keep the population of that year</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>cdc_usa_grouped <span class="ot">&lt;-</span> cdc_usa <span class="sc">|&gt;</span> <span class="fu">group_by</span>(Year) <span class="sc">|&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Deaths =</span> <span class="fu">sum</span>(Deaths),</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Population =</span> <span class="fu">min</span>(Population),</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Crude_Rate =</span> <span class="fu">sum</span>(Crude_Rate),</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">Age_Adj_Rate =</span> <span class="fu">sum</span>(Age_Adj_Rate),</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">'drop'</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="co">#Reshaping data using pivot_longer so we can facet by metric:</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>cdc_usa_long <span class="ot">&lt;-</span> cdc_usa_grouped <span class="sc">|&gt;</span> </span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(Deaths, Population, Crude_Rate, Age_Adj_Rate), <span class="at">names_to =</span> <span class="st">"Metric"</span>, <span class="at">values_to =</span> <span class="st">"Value"</span>)</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="co">#Adjusting the order and names of the metrics</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>cdc_usa_long<span class="sc">$</span>Metric <span class="ot">&lt;-</span> <span class="fu">factor</span>(cdc_usa_long<span class="sc">$</span>Metric, </span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Population"</span>, <span class="st">"Crude_Rate"</span>, <span class="st">"Deaths"</span>, <span class="st">"Age_Adj_Rate"</span>),</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Population in US"</span>, <span class="st">"Crude Death Rate"</span>, <span class="st">"Deaths"</span>, <span class="st">"Age Adjusted Death Rate"</span>))</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="co">#Creating the time series:</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cdc_usa_long, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Value)) <span class="sc">+</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"#FF6C22"</span>, <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> Metric, <span class="at">scales =</span> <span class="st">"free_y"</span>, <span class="at">ncol =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Time Series"</span>, <span class="at">x =</span> <span class="st">"Year"</span>, <span class="at">y =</span> <span class="st">"Value"</span>) <span class="sc">+</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma, <span class="at">breaks =</span> scales<span class="sc">::</span><span class="fu">pretty_breaks</span>(<span class="at">n =</span> <span class="dv">4</span>)) <span class="sc">+</span></span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.
ℹ Please use `linewidth` instead.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Let’s make some general observations:</p>
<ul>
<li>Population went from 280 millions in 1999 to 330 in 2020. This is an approximate growth of 18%.</li>
<li>In the same period, death increased by 16%, which is less than population growth.</li>
<li>The Crude Death Rate, which is simply the number of deaths divided by the total population times 100,000 reflects this fact going down to 665 from 680. This means that the death rate went down 2.2%.</li>
<li>However, and more surprising, age adjusted death rate reduced 29%.</li>
</ul>
<p>A good way to compare the trends, would be to observe the cumulative perceptual growth of each metric, in a single time series plot:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Calculating cumulative percentual change for each column</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>cdc_usa_grouped_cum <span class="ot">&lt;-</span> cdc_usa_grouped <span class="sc">|&gt;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Deaths =</span> Deaths <span class="sc">/</span> <span class="fu">first</span>(Deaths) <span class="sc">-</span> <span class="dv">1</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Population =</span> Population <span class="sc">/</span> <span class="fu">first</span>(Population) <span class="sc">-</span> <span class="dv">1</span>,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">Crude_Rate =</span> Crude_Rate <span class="sc">/</span> <span class="fu">first</span>(Crude_Rate) <span class="sc">-</span> <span class="dv">1</span>,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">Age_Adj_Rate =</span> Age_Adj_Rate <span class="sc">/</span> <span class="fu">first</span>(Age_Adj_Rate) <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">#pivot_longer this data:</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>cdc_usa_grouped_cum <span class="ot">&lt;-</span> cdc_usa_grouped_cum <span class="sc">|&gt;</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>Year, <span class="at">names_to =</span> <span class="st">"Metric"</span>, <span class="at">values_to =</span> <span class="st">"Cumulative Change"</span>)</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="co">#Creating the time series plot</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cdc_usa_grouped_cum, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> <span class="st">`</span><span class="at">Cumulative Change</span><span class="st">`</span>, <span class="at">color =</span> Metric)) <span class="sc">+</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.3</span>) <span class="sc">+</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Cumulative Percentual Change (1999-2020)"</span>, <span class="at">x =</span> <span class="st">"Year"</span>, </span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Cumulative Percentual Change"</span>, <span class="at">color =</span> <span class="st">"Metric"</span>) <span class="sc">+</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(), <span class="at">breaks =</span> scales<span class="sc">::</span><span class="fu">pretty_breaks</span>(<span class="at">n =</span> <span class="dv">8</span>))<span class="sc">+</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> scales<span class="sc">::</span><span class="fu">pretty_breaks</span>(<span class="at">n =</span> <span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>General observations:</p>
<ul>
<li>As stated before, population growth has been steady in the period.</li>
<li>Between 1999 and 2012, Total Deaths were approximately constant while the population grew steadily. This provoked the Crude Rate to decrease sharply (denominator increasing). However, from 2013 to 2020, we observed a sharp increase in Deaths, growing around 10% in 7 years. Interestingly, 6% was given from 2013 to 2019 and 4% in 2020. The issue is that COVID-19 exacerbated the severity of other diseases, causing more deaths, which were categorized not as COVID-19 directly. Remember that in this dataset, we omit COVID-19, but we, in fact, see an effect from the pandemic, which is seen in the spikes of 2020.</li>
<li>Although population growth lost some steam from 2013 to 2020, the real cause of the increase in the crude rate of deaths is a sharp increase in deaths.</li>
<li>While the crude rate increased considerably during the period, the age-adjusted death rate kept decreasing. This metric takes into consideration the age distribution of people. If deaths increase because people are aging, it assigns a lesser weight to the metric by weighting by age buckets. This means the metric can be compared across populations with different age structures. Overall, we can say that the increase in deaths has been primarily due to an aging population.</li>
<li>We can observe how the population has aged by observing the Population Pyramids for the United States in the image below. The U.S. Census Bureau created the Pyramid Population charts that show how the US has aged in the last two decades.</li>
<li>We say in aggregate because we will break down by cause and see if we can confirm this intuition.</li>
<li>Finally, the relatively milder uptick in the Age-Adjusted-Death-Rate in 2020 versus the Crude Rate can be interpreted as COVID causing more deaths in elderly people. The last went up 3.5% that year, while the former was 4.5%.</li>
</ul>
<p><img src="https://www.census.gov/content/dam/Census/library/stories/2023/05/aging-united-states-population-fewer-children-in-2020-figure-2.jpg" class="img-fluid" style="width:110.0%"></p>
</section>
<section id="understanding-the-underlying-causes-of-death" class="level3" data-number="3.1.3">
<h3 data-number="3.1.3" class="anchored" data-anchor-id="understanding-the-underlying-causes-of-death"><span class="header-section-number">3.1.3</span> Understanding the underlying causes of death</h3>
<p>According to the CDC, the best metric to study death evolution is using age-adjusted death rates. We then begin by investigating the evolution of age adjusted death rate across time.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Creating a faceting chart, which will have age adjusted death rates by cause of death:</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>df_usa_cause <span class="ot">&lt;-</span> cdc_usa <span class="sc">|&gt;</span> <span class="fu">select</span>(Year, Cause, Age_Adj_Rate)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_usa_cause, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> Age_Adj_Rate, <span class="at">group =</span> Cause, <span class="at">color =</span> Cause)) <span class="sc">+</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span> <span class="co"># Thicker lines</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> Cause, <span class="at">scales =</span> <span class="st">"free_y"</span>) <span class="sc">+</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Time Series of Causes of Death in the USA"</span>, <span class="at">x =</span> <span class="st">"Year"</span>, <span class="at">y =</span> <span class="st">"Age Adjusted Death Rate"</span>)<span class="sc">+</span> </span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">color =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We can make the following observations:</p>
<ul>
<li>As seen before, the overall age adjusted death rate in the United States is in aggregate decreasing since 1999</li>
<li>However, not all causes share the same decreasing shape. For instance, Alzheimer’s, Unintentional injuries and suicide, have been increasing dramatically.</li>
<li>Overall, Cancer, CLRD (Chronic lower respiratory diseases), Heart diseases, Kidney diseases and Strokes have shown an impressive reduction in deaths.</li>
<li>Diabetes seems to be a cause for concern, but it can be explained by COVID-19: “Several underlying medical conditions can increase the risk of severe illness and a higher likelihood of lethality if a person contracts COVID-19, including diabetes”.</li>
</ul>
<p>The different types of causes don’t share the same dimensions. We can compare the evolution of these death-rates calculating the percentual growth over time:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>cdc_usa_wider <span class="ot">&lt;-</span> df_usa_cause <span class="sc">|&gt;</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">id_cols =</span> Year,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> Cause,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> Age_Adj_Rate</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co">#Calculating cumulative percentual change for each column</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>cdc_usa_wider <span class="ot">&lt;-</span> cdc_usa_wider <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="sc">-</span>Year, <span class="sc">~</span> .<span class="sc">/</span><span class="fu">first</span>(.) <span class="sc">-</span> <span class="dv">1</span>))</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="co">#pivot_longer this data:</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>cdc_usa_wider <span class="ot">&lt;-</span> cdc_usa_wider <span class="sc">|&gt;</span> <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>Year, <span class="at">names_to =</span> <span class="st">"Metric"</span>, <span class="at">values_to =</span> <span class="st">"Cumulative Change"</span>)</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="co">#We use a color blind friendly palette</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>color_blind_friendly <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#E69F00"</span>, <span class="st">"#56B4E9"</span>, <span class="st">"#009E73"</span>, <span class="st">"#F0E442"</span>, </span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"#0072B2"</span>, <span class="st">"#D55E00"</span>, <span class="st">"#CC79A7"</span>, <span class="st">"#999999"</span>, </span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>                          <span class="st">"#882255"</span>, <span class="st">"#88CCEE"</span>)</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="co">#Creating the time series plot</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cdc_usa_wider, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> <span class="st">`</span><span class="at">Cumulative Change</span><span class="st">`</span>, <span class="at">color =</span> Metric)) <span class="sc">+</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Cumulative Change - Age Adj. Death Rate"</span>, <span class="at">x =</span> <span class="st">"Year"</span>, <span class="at">y =</span> <span class="st">"Cumulative Percentual Change"</span>, <span class="at">color =</span> <span class="st">"Metric"</span>) <span class="sc">+</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(), <span class="at">breaks =</span> scales<span class="sc">::</span><span class="fu">pretty_breaks</span>(<span class="at">n =</span> <span class="dv">8</span>))<span class="sc">+</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> scales<span class="sc">::</span><span class="fu">pretty_breaks</span>(<span class="at">n =</span> <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> color_blind_friendly) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>With the cumulative percentage time series graph broken down by cause, we can see some interesting trends and better understand the trends over time. In particular, deaths caused by Alzheimer’s disease is aggressively increasing year by year. Unintentional injuries and suicide are the number two and number three fastest growing causes of death, respectively. Additionally, we can note that stroke, influenza and pneumonia, and heart disease have actually been decreasing during the same time of 1999-2020. Those we should note that death from Stroke, Influenza and pneumonia, and heart disease diseases showed a decreasing trend until 2012, but then began to grow again.</p>
<p>The overall trend is downward for the age adjusted death rate. However, we have identified three causes that show a different behavior. Now we will try to identify which states are leading in these metrics.</p>
</section>
<section id="disaggregating-by-state" class="level3" data-number="3.1.4">
<h3 data-number="3.1.4" class="anchored" data-anchor-id="disaggregating-by-state"><span class="header-section-number">3.1.4</span> Disaggregating by state</h3>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Filter the data for the specified conditions</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>df_rank1 <span class="ot">&lt;-</span> cdc_dataset <span class="sc">|&gt;</span> <span class="fu">filter</span>(State <span class="sc">!=</span> <span class="st">'United States'</span>) <span class="sc">|&gt;</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Year, State, Cause, Age_Adj_Rate)<span class="sc">|&gt;</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1999</span>, <span class="dv">2020</span>), Cause <span class="sc">==</span> <span class="st">"Alzheimer's disease"</span>)</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculating the percentual difference change from 2000 to 2017 for each state</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>df_rank1 <span class="ot">&lt;-</span> df_rank1 <span class="sc">%&gt;%</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Year, <span class="at">values_from =</span> Age_Adj_Rate) <span class="sc">|&gt;</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">PercentChange =</span> <span class="st">`</span><span class="at">2020</span><span class="st">`</span><span class="sc">/</span><span class="st">`</span><span class="at">1999</span><span class="st">`</span><span class="sc">-</span><span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(PercentChange))</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="co">#Cleveland</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_rank1, <span class="fu">aes</span>(<span class="at">x =</span> PercentChange, <span class="at">y =</span> <span class="fu">reorder</span>(State, PercentChange))) <span class="sc">+</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"darkgreen"</span>) <span class="sc">+</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Alzheimer's Disease %Chg. in Age Adj. Death Rate"</span>, <span class="at">x =</span> <span class="st">"Percentage Change 1999 to 2020"</span>, <span class="at">y =</span> <span class="st">'State'</span>) <span class="sc">+</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.major.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major.y =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"grey60"</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>))<span class="sc">+</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(), <span class="at">breaks =</span> scales<span class="sc">::</span><span class="fu">pretty_breaks</span>(<span class="at">n =</span> <span class="dv">8</span>))<span class="sc">+</span></span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="528"></p>
</div>
</div>
<p>We can see that Mississippi, Arkansas and Alabama have seen the largest increase, while Maine, Maryland and Montana are the smallest.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Filter the data for the specified conditions</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>df_rank2 <span class="ot">&lt;-</span> cdc_dataset <span class="sc">|&gt;</span> <span class="fu">filter</span>(State <span class="sc">!=</span> <span class="st">'United States'</span>) <span class="sc">|&gt;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Year, State, Cause, Age_Adj_Rate)<span class="sc">|&gt;</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1999</span>, <span class="dv">2020</span>), Cause <span class="sc">==</span> <span class="st">"Unintentional injuries"</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculating the percentual difference change from 2000 to 2017 for each state</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>df_rank2 <span class="ot">&lt;-</span> df_rank2 <span class="sc">%&gt;%</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Year, <span class="at">values_from =</span> Age_Adj_Rate) <span class="sc">|&gt;</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">PercentChange =</span> <span class="st">`</span><span class="at">2020</span><span class="st">`</span><span class="sc">/</span><span class="st">`</span><span class="at">1999</span><span class="st">`</span><span class="sc">-</span><span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(PercentChange))</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="co">#Cleveland</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_rank2, <span class="fu">aes</span>(<span class="at">x =</span> PercentChange, <span class="at">y =</span> <span class="fu">reorder</span>(State, PercentChange))) <span class="sc">+</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"darkblue"</span>) <span class="sc">+</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Unintent. Injuries %Chg in Age Adj Death Rate"</span>, <span class="at">x =</span> <span class="st">"Percentage Change 1999 to 2020"</span>, <span class="at">y =</span> <span class="st">'State'</span>) <span class="sc">+</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.major.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major.y =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"grey60"</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>))<span class="sc">+</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(), <span class="at">breaks =</span> scales<span class="sc">::</span><span class="fu">pretty_breaks</span>(<span class="at">n =</span> <span class="dv">8</span>))<span class="sc">+</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="528"></p>
</div>
</div>
<p>We can see that Rhode Island, West Virginia, and Massachusetts have seen the largest increase, while Idaho, Nebraska and Alabama are the smallest.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Filter the data for the specified conditions</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>df_rank3 <span class="ot">&lt;-</span> cdc_dataset <span class="sc">|&gt;</span> <span class="fu">filter</span>(State <span class="sc">!=</span> <span class="st">'United States'</span>) <span class="sc">|&gt;</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Year, State, Cause, Age_Adj_Rate)<span class="sc">|&gt;</span> </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1999</span>, <span class="dv">2020</span>), Cause <span class="sc">==</span> <span class="st">"Suicide"</span>)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculating the percentual difference change from 2000 to 2017 for each state</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>df_rank3 <span class="ot">&lt;-</span> df_rank3 <span class="sc">%&gt;%</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Year, <span class="at">values_from =</span> Age_Adj_Rate) <span class="sc">|&gt;</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">PercentChange =</span> <span class="st">`</span><span class="at">2020</span><span class="st">`</span><span class="sc">/</span><span class="st">`</span><span class="at">1999</span><span class="st">`</span><span class="sc">-</span><span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(PercentChange))</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co">#Cleveland</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_rank3, <span class="fu">aes</span>(<span class="at">x =</span> PercentChange, <span class="at">y =</span> <span class="fu">reorder</span>(State, PercentChange))) <span class="sc">+</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>, <span class="at">color =</span> <span class="st">"orange"</span>) <span class="sc">+</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Suicide %Chg. in Age Adj. Death Rate"</span>, <span class="at">x =</span> <span class="st">"Percentage Change 1999 to 2020"</span>, <span class="at">y =</span> <span class="st">'State'</span>) <span class="sc">+</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.major.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.minor.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">panel.grid.major.y =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">"grey60"</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>))<span class="sc">+</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(), <span class="at">breaks =</span> scales<span class="sc">::</span><span class="fu">pretty_breaks</span>(<span class="at">n =</span> <span class="dv">8</span>))<span class="sc">+</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="528"></p>
</div>
</div>
<p>We can see that Vermont, Iowa and Kansas have seen the largest increase, while California, Rhode Island and Nevada are the smallest.</p>
<p>It is interesting to note that in the case of Alzheimer’s, Unintentional Injuries and Suicide, the three diseases exhibit increasing age adjusted rates in the period. There are only a few exceptions such as Nevada and Rhode Island in Suicide or Maine in Alzheimer’s where a decreasing rate has been seen. For this reason, we believe it is worth looking at box plots to identify outliers and find explanations for them.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>df_box <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  df_rank1[, <span class="fu">c</span>(<span class="st">"State"</span>, <span class="st">"Cause"</span>, <span class="st">"PercentChange"</span>)],</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  df_rank2[, <span class="fu">c</span>(<span class="st">"State"</span>, <span class="st">"Cause"</span>, <span class="st">"PercentChange"</span>)],</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  df_rank3[, <span class="fu">c</span>(<span class="st">"State"</span>, <span class="st">"Cause"</span>, <span class="st">"PercentChange"</span>)]</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_box, <span class="fu">aes</span>(<span class="at">x =</span> Cause, <span class="at">y =</span> PercentChange)) <span class="sc">+</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">fill =</span> <span class="st">"#A6CF98"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span> </span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Box-Plot: Percent Change by Cause - 1999 to 2020 - by States"</span>, <span class="at">x =</span> <span class="st">"Cause"</span>, <span class="at">y =</span> <span class="st">"Percent Change"</span>) <span class="sc">+</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>percent)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Matching these values with the previous cleveland dot plots, we can say that Mississippi is an outlier for Alzheimer. Rhode Island and West Virginia are outliers for Unintentional Injuries. Finally, Suicide seems to not have any outlier. From the boxplots we also notice that the three causes are skewed to the right.</p>
</section>
<section id="analyzing-alzheimers-disease" class="level3" data-number="3.1.5">
<h3 data-number="3.1.5" class="anchored" data-anchor-id="analyzing-alzheimers-disease"><span class="header-section-number">3.1.5</span> Analyzing Alzheimer’s Disease</h3>
<p>Apparently the states most affected by Alzheimer’s are in the southern part of the United States. Given the possible geographical dependence, we propose to corroborate the information with the following geospatial visualization.</p>
<p>To make the differences more notorious, we are going to paint the top 12% of States in terms growing deaths due to Alzheimer.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#We calculate the 88th percentile (top 12% threshold)</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>top_10_percent_threshold <span class="ot">&lt;-</span> <span class="fu">quantile</span>(df_rank1<span class="sc">$</span>PercentChange, <span class="at">probs =</span> <span class="fl">0.88</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co">#We create a new variable to indicate top 12%</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>df_rank1<span class="sc">$</span>Top10Percent <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(df_rank1<span class="sc">$</span>PercentChange <span class="sc">&gt;</span> top_10_percent_threshold, <span class="st">"Top 12%"</span>, <span class="st">"Below Top 12%"</span>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co">#For the merge to work, we ensure that state names in both datasets are in lowercase for successful merging</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>df_rank1<span class="sc">$</span>State <span class="ot">&lt;-</span> <span class="fu">tolower</span>(df_rank1<span class="sc">$</span>State)</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>states_map <span class="ot">&lt;-</span> <span class="fu">map_data</span>(<span class="st">"state"</span>)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>states_map<span class="sc">$</span>region <span class="ot">&lt;-</span> <span class="fu">tolower</span>(states_map<span class="sc">$</span>region)</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="co">#Merging the datasets</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>df_map <span class="ot">&lt;-</span> <span class="fu">merge</span>(states_map, df_rank1, <span class="at">by.x =</span> <span class="st">"region"</span>, <span class="at">by.y =</span> <span class="st">"State"</span>, <span class="at">all.x =</span> <span class="cn">TRUE</span>)</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="co">#We plot the map</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> df_map, <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group, <span class="at">fill =</span> Top10Percent)) <span class="sc">+</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(<span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Top 12%"</span> <span class="ot">=</span> <span class="st">"red"</span>, <span class="st">"Below Top 12%"</span> <span class="ot">=</span> <span class="st">"grey"</span>), </span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>                      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Below Top 12%"</span>, <span class="st">"Top 12%"</span>)) <span class="sc">+</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">"Category"</span>) <span class="sc">+</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(), <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(), <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.title.x =</span> <span class="fu">element_blank</span>(), <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_fixed</span>(<span class="fl">1.4</span>) <span class="sc">+</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top 6 States with highest Death Rates due to Alzheimer's"</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We can clearly see a cluster in the south-east of the U.S. This cluster concentrates the 12% that saw the biggest increase in deaths due to Alzhmeier’s (age-adjusted).</p>
<p>According to this study: https://www.nia.nih.gov/news/data-shows-racial-disparities-alzheimers-disease-diagnosis-between-black-and-white-research, black people are almost twice more likely to develop dementia due to a higher exposure to risk factors. For this reason, we will investigate black race distribution by state.</p>
<p>First, let’s take a look if there is indeed a difference between the Age-Adjusted Death Rate of Black vs White people:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Loading cases of Alzheimer distinguished by race across time: </span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>cdc_dataset_race <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">"NCHS_Leading_Causes_of_Death_United_States_2020_Race.csv"</span>)</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>cdc_dataset_race <span class="ot">&lt;-</span> cdc_dataset_race <span class="sc">|&gt;</span> <span class="fu">mutate_all</span>(<span class="sc">~</span><span class="fu">ifelse</span>(<span class="fu">is.na</span>(.), <span class="dv">0</span>, .))</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>cdc_usa_race <span class="ot">=</span> cdc_dataset_race <span class="sc">|&gt;</span> <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">"United States"</span>) <span class="sc">|&gt;</span> <span class="fu">select</span>(Year, Race, Age_Adj_Death_Rate)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co">#Pivot wider:</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>cdc_usa_race <span class="ot">&lt;-</span> cdc_usa_race <span class="sc">|&gt;</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Race, <span class="at">values_from =</span> Age_Adj_Death_Rate)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>cdc_usa_race <span class="ot">&lt;-</span> cdc_usa_race <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="sc">-</span>Year, <span class="sc">~</span> .<span class="sc">/</span><span class="fu">first</span>(.) <span class="sc">-</span> <span class="dv">1</span>))</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="co">#pivot_longer this data:</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>cdc_usa_race <span class="ot">&lt;-</span> cdc_usa_race <span class="sc">|&gt;</span> <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span>Year, <span class="at">names_to =</span> <span class="st">"Alzheimer"</span>, <span class="at">values_to =</span> <span class="st">"Cumulative Change"</span>)</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="co">#Creating the time series plot</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cdc_usa_race, <span class="fu">aes</span>(<span class="at">x =</span> Year, <span class="at">y =</span> <span class="st">`</span><span class="at">Cumulative Change</span><span class="st">`</span>, <span class="at">color =</span> Alzheimer)) <span class="sc">+</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.3</span>) <span class="sc">+</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Cumulative Percentage Change ('99-'20) - Alzheimer - Age Adjusted Death Rate"</span>, <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Cumulative Percentage Change"</span>, <span class="at">color =</span> <span class="st">"Race"</span>) <span class="sc">+</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">percent_format</span>(), <span class="at">breaks =</span> scales<span class="sc">::</span><span class="fu">pretty_breaks</span>(<span class="at">n =</span> <span class="dv">8</span>))<span class="sc">+</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> scales<span class="sc">::</span><span class="fu">pretty_breaks</span>(<span class="at">n =</span> <span class="dv">10</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>In fact, we can clearly see a difference between white and black people: the later having increased its death rate by 160% vs 95% during the last 20 years.</p>
<p>Let’s see then the distribution of black people by state. We will take the averages across the time period:</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>cdc_usa_race_pop <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">"NCHS_United_States_2020_Race_Distribution.csv"</span>)</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>cdc_usa_race_pop <span class="ot">=</span> cdc_usa_race_pop <span class="sc">|&gt;</span> <span class="fu">group_by</span>(Race, State) <span class="sc">|&gt;</span> <span class="fu">summarize</span>(<span class="at">Population =</span> <span class="fu">mean</span>(Population))</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>cdc_usa_race_pop <span class="ot">&lt;-</span> cdc_usa_race_pop <span class="sc">|&gt;</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Race, <span class="at">values_from =</span> Population)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>cdc_usa_race_pop<span class="sc">$</span>Total <span class="ot">=</span> cdc_usa_race_pop<span class="sc">$</span>Black <span class="sc">+</span> cdc_usa_race_pop<span class="sc">$</span>White</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>cdc_usa_race_pop<span class="sc">$</span>Black <span class="ot">=</span> cdc_usa_race_pop<span class="sc">$</span>Black<span class="sc">/</span>cdc_usa_race_pop<span class="sc">$</span>Total</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>cdc_usa_race_pop <span class="ot">=</span> cdc_usa_race_pop <span class="sc">|&gt;</span> <span class="fu">select</span>(State, Black)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="co">#We calculate the 88th percentile (top 12% threshold)</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>cdc_usa_race_pop_threshold <span class="ot">&lt;-</span> <span class="fu">quantile</span>(cdc_usa_race_pop<span class="sc">$</span>Black, <span class="at">probs =</span> <span class="fl">0.80</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="co">#We create a new variable</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>cdc_usa_race_pop<span class="sc">$</span>TopPercent <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(cdc_usa_race_pop<span class="sc">$</span>Black <span class="sc">&gt;</span> cdc_usa_race_pop_threshold, <span class="st">"Top 25%"</span>, <span class="st">"Below Top 25%"</span>)</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="co">#For the merge to work, we ensure that state names in both datasets are in lowercase for successful merging</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>cdc_usa_race_pop<span class="sc">$</span>State <span class="ot">&lt;-</span> <span class="fu">tolower</span>(cdc_usa_race_pop<span class="sc">$</span>State)</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>states_map <span class="ot">&lt;-</span> <span class="fu">map_data</span>(<span class="st">"state"</span>)</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>states_map<span class="sc">$</span>region <span class="ot">&lt;-</span> <span class="fu">tolower</span>(states_map<span class="sc">$</span>region)</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a><span class="co">#Merging the datasets</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>df_map <span class="ot">&lt;-</span> <span class="fu">merge</span>(states_map, cdc_usa_race_pop, <span class="at">by.x =</span> <span class="st">"region"</span>, <span class="at">by.y =</span> <span class="st">"State"</span>, <span class="at">all.x =</span> <span class="cn">TRUE</span>)</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a><span class="co">#We plot the map</span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> df_map, <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat, <span class="at">group =</span> group, <span class="at">fill =</span> TopPercent)) <span class="sc">+</span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_polygon</span>(<span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Top 25%"</span> <span class="ot">=</span> <span class="st">"blue"</span>, <span class="st">"Below Top 25%"</span> <span class="ot">=</span> <span class="st">"grey"</span>), </span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>                      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Below Top 25%"</span>, <span class="st">"Top 25%"</span>)) <span class="sc">+</span></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">"Category"</span>) <span class="sc">+</span></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(), <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(), <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>          <span class="at">axis.title.x =</span> <span class="fu">element_blank</span>(), <span class="at">axis.title.y =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">coord_fixed</span>(<span class="fl">1.4</span>) <span class="sc">+</span></span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Top 10 States with highest proportion of Black People"</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># df_map %&gt;% filter(TopPercent =="Top 25%") %&gt;% distinct(region)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Although not perfect, we see a strong correlation that supports the study: southern states have the most share of black people, and it coincides with the states that have had higher increases of deaths due to Alzheimer’s disease.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>df_life_expectancy <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"NCHS_-_Death_rates_and_life_expectancy_at_birth_20231111.csv"</span>)</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co">#df_life_expectancy</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>df_life_expectancy_1939_to_1960 <span class="ot">=</span> df_life_expectancy <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Race <span class="sc">==</span> <span class="st">"All Races"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Sex <span class="sc">==</span> <span class="st">"Both Sexes"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Year <span class="sc">&gt;=</span> <span class="dv">1939</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Year <span class="sc">&lt;=</span> <span class="dv">1960</span>)  <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>Race,<span class="sc">-</span>Sex,<span class="sc">-</span><span class="st">`</span><span class="at">Age-adjusted Death Rate</span><span class="st">`</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co">#df_life_expectancy_1939_to_1960</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>alzheimer_crude <span class="ot">=</span> cdc_usa <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Cause <span class="sc">==</span> <span class="st">"Alzheimer's disease"</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(Year, Cause,Crude_Rate)</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co">#alzheimer_crude</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>expectancy_alzheimer_regression_2 <span class="ot">=</span> <span class="fu">cbind</span>(alzheimer_crude,df_life_expectancy_1939_to_1960)</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="co">#expectancy_alzheimer_regression_2 # this is the table</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(expectancy_alzheimer_regression_2 <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="st">`</span><span class="at">Crude_Rate</span><span class="st">`</span>,<span class="st">`</span><span class="at">Average Life Expectancy (Years)</span><span class="st">`</span>), <span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Average Life Expectancy (Years)</span><span class="st">`</span>, <span class="at">y =</span> <span class="st">`</span><span class="at">Crude_Rate</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span> </span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Average Life Expectancy"</span>, <span class="at">y =</span> <span class="st">"Crude Rate"</span>, <span class="at">title =</span> <span class="st">"Scatterplot Regression for Alzheimer's Crude Rate vs Life Expectancy (1999 - 2020)"</span>) <span class="sc">+</span> </span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">caption =</span> <span class="st">"Correlation coefficient R = 0.88 "</span>) <span class="sc">+</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust=</span>.<span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> expectancy_alzheimer_regression_2<span class="sc">$</span><span class="st">`</span><span class="at">Crude_Rate</span><span class="st">`</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> expectancy_alzheimer_regression_2<span class="sc">$</span><span class="st">`</span><span class="at">Average Life Expectancy (Years)</span><span class="st">`</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>regression_model_cumul_growth <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> x)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(y,x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  y and x
t = 8.2172, df = 20, p-value = 7.687e-08
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 0.7253415 0.9486506
sample estimates:
      cor 
0.8783436 </code></pre>
</div>
</div>
<p>According to CDC, the Alzheimer’s onset is around 60 years old. It’s interesting to note that there has been a general increase in life expectancy for people born between 1939 and 1960. In 1999, they would have reached 60 years old, which is around the age of first onset. The Life expectancy rose from 63.7 to 69.7 years old. Naturally, we see a very high positive correlation (0.88) between the increase of deaths due to Alzheimer’s disease and the rise in life expectancy.</p>
</section>
<section id="analyzing-unintentional-injuries" class="level3" data-number="3.1.6">
<h3 data-number="3.1.6" class="anchored" data-anchor-id="analyzing-unintentional-injuries"><span class="header-section-number">3.1.6</span> Analyzing Unintentional Injuries</h3>
<p>The increase is clearly due to opioids: https://www.cdc.gov/opioids/basics/epidemic.html</p>
<p>I was trying to get a dataset like: opioid sales.. but ofc, this is illegal market, and hard to record any data… it seems that deaths are the only dataset to track the consumption? Not sure….</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>df_opiod <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"NCHS_Opiod_Dispense.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: One or more parsing issues, call `problems()` on your data frame for details,
e.g.:
  dat &lt;- vroom(...)
  problems(dat)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 771 Columns: 4
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (3): State, StateAbb, Year
dbl (1): OpiodDispenseRatePer100

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>df_opiod_state <span class="ot">=</span> df_opiod <span class="sc">%&gt;%</span> <span class="fu">filter</span>(State <span class="sc">!=</span> <span class="st">'United States'</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>df_opiod_state <span class="ot">=</span> df_opiod_state <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>StateAbb)</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>df_opiod_state_arranged <span class="ot">=</span>  df_opiod_state <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(OpiodDispenseRatePer100))</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co">#df_opiod_state_arranged %&gt;% filter(State == 'West Virginia')</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="co">#df_opiod_state_arranged %&gt;% filter(Year &lt;= 2020) %&gt;% group_by(State) %&gt;% summarize(Avg = mean(OpiodDispenseRatePer100)) %&gt;% arrange(desc(Avg)) %&gt;% filter(Avg &gt; 95)</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>z <span class="ot">=</span> df_opiod_state_arranged <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Year <span class="sc">&lt;=</span> <span class="dv">2020</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(State) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">Avg =</span> <span class="fu">mean</span>(OpiodDispenseRatePer100)) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(Avg)) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Avg <span class="sc">&gt;</span> <span class="dv">95</span>)</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>z_reverse <span class="ot">=</span> z[<span class="fu">order</span>(z<span class="sc">$</span>Avg), ]</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a><span class="co">#z_reverse</span></span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot(df_opiod_state_arranged %&gt;% filter(Year &lt;= 2020) %&gt;% group_by(State) %&gt;% summarize(Avg = mean(OpiodDispenseRatePer100)) %&gt;% arrange(desc(Avg)) %&gt;% filter(Avg &gt; 95), aes(x = State, y = Avg)) +</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_bar(stat = "identity", fill = '#8B4513')</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>my_cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"darkgreen"</span>, <span class="st">"orange"</span>)</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a><span class="fu">dotchart</span>(z_reverse<span class="sc">$</span>Avg, <span class="at">labels =</span> z_reverse<span class="sc">$</span>State,<span class="at">gcolor =</span> <span class="st">"green"</span>,</span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>         <span class="at">cex =</span> <span class="fl">0.9</span>, <span class="at">xlab =</span> <span class="st">"Opioid Dispense Rate Per 100"</span>, <span class="at">main =</span> <span class="st">"Top 8 Highest States with Average Opioid Dispense Rate for 2006-2020"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We see that West Virginia has the highest average dispensing rate</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>df_opiod_state_arranged_top5_states <span class="ot">=</span> df_opiod_state_arranged <span class="sc">%&gt;%</span> <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">"West Virginia"</span> <span class="sc">|</span> State <span class="sc">==</span> <span class="st">"Alabama"</span> <span class="sc">|</span> State <span class="sc">==</span> <span class="st">"Tennessee"</span> <span class="sc">|</span> State <span class="sc">==</span> <span class="st">"Kentucky"</span> <span class="sc">|</span> State <span class="sc">==</span> <span class="st">"Arkansas"</span> <span class="sc">|</span> State <span class="sc">==</span> <span class="st">"Mississippi"</span> <span class="sc">|</span> State <span class="sc">==</span> <span class="st">"Oklahoma"</span> <span class="sc">|</span> State <span class="sc">==</span> <span class="st">"Louisiana"</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>df_opiod_state_arranged_top5_states</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 120 × 3
   State         OpiodDispenseRatePer100 Year 
   &lt;chr&gt;                           &lt;dbl&gt; &lt;chr&gt;
 1 West Virginia                    147. 2009 
 2 West Virginia                    146. 2008 
 3 Alabama                          144. 2012 
 4 West Virginia                    143. 2010 
 5 Alabama                          142. 2013 
 6 Tennessee                        140  2010 
 7 West Virginia                    140. 2011 
 8 Tennessee                        138. 2011 
 9 Tennessee                        138. 2009 
10 Kentucky                         137  2011 
# ℹ 110 more rows</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(df_opiod_state_arranged_top5_states, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">as.numeric</span>(Year), <span class="at">y =</span> OpiodDispenseRatePer100, <span class="at">color =</span> State)) <span class="sc">+</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>top5_states_adj_rate_unint <span class="ot">=</span> cdc_dataset <span class="sc">%&gt;%</span> <span class="fu">filter</span>(State <span class="sc">!=</span> <span class="st">"United States"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Cause <span class="sc">==</span> <span class="st">"Unintentional injuries"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Year <span class="sc">&gt;</span> <span class="dv">2005</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>top5_states_adj_rate_unint <span class="ot">=</span> top5_states_adj_rate_unint <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(State) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">Avg =</span> <span class="fu">mean</span>(Age_Adj_Rate)) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(Avg)) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Avg <span class="sc">&gt;</span> <span class="dv">57</span>)<span class="co"># %&gt;% filter(Avg &gt; 57.4)</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co">#top5_states_adj_rate_unint</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>w <span class="ot">=</span> top5_states_adj_rate_unint</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="co">#w</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>w_reverse <span class="ot">=</span> w[<span class="fu">order</span>(w<span class="sc">$</span>Avg), ]</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a><span class="co">#w_reverse</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a><span class="fu">dotchart</span>(w_reverse<span class="sc">$</span>Avg, <span class="at">labels =</span> w_reverse<span class="sc">$</span>State,<span class="at">gcolor =</span> <span class="st">"green"</span>,</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">cex =</span> <span class="fl">0.9</span>, <span class="at">xlab =</span> <span class="st">"Age Adjusted Death Rate"</span>, <span class="at">main =</span> <span class="st">"Top 8 Highest States w/ Avg Age-Adj Death Rate for Unintentional '06-'20"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>selected_top5 <span class="ot">=</span> cdc_dataset <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Cause <span class="sc">==</span> <span class="st">"Unintentional injuries"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(State <span class="sc">==</span> <span class="st">"West Virginia"</span> <span class="sc">|</span> State <span class="sc">==</span> <span class="st">"New Mexico"</span> <span class="sc">|</span> State <span class="sc">==</span> <span class="st">"Kentucky"</span> <span class="sc">|</span> State <span class="sc">==</span> <span class="st">"Mississippi"</span> <span class="sc">|</span> State <span class="sc">==</span> <span class="st">"Alaska"</span> <span class="sc">|</span> State <span class="sc">==</span> <span class="st">"Wyoming"</span> <span class="sc">|</span> State <span class="sc">==</span> <span class="st">"Oklahoma"</span> <span class="sc">|</span> State <span class="sc">==</span> <span class="st">"Tennessee"</span>)  <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Year <span class="sc">&gt;</span> <span class="dv">2005</span>)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>selected_top5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 120 × 7
    Year Cause                  State  Deaths Population Crude_Rate Age_Adj_Rate
   &lt;dbl&gt; &lt;chr&gt;                  &lt;chr&gt;   &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;
 1  2006 Unintentional injuries Alaska    316     675302       46.8         52.3
 2  2006 Unintentional injuries Kentu…   2446    4219239       58           57.9
 3  2006 Unintentional injuries Missi…   1856    2904978       63.9         64.7
 4  2006 Unintentional injuries New M…   1297    1962137       66.1         67.6
 5  2006 Unintentional injuries Oklah…   2039    3594090       56.7         56.6
 6  2006 Unintentional injuries Tenne…   3307    6088766       54.3         54.3
 7  2006 Unintentional injuries West …   1177    1827912       64.4         62.4
 8  2006 Unintentional injuries Wyomi…    306     522667       58.5         58.9
 9  2007 Unintentional injuries Alaska    354     680300       52           56.3
10  2007 Unintentional injuries Kentu…   2372    4256672       55.7         55.6
# ℹ 110 more rows</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(selected_top5, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">as.numeric</span>(Year), <span class="at">y =</span> Age_Adj_Rate, <span class="at">color =</span> State)) <span class="sc">+</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>opiod_top8 <span class="ot">=</span> df_opiod_state_arranged_top5_states <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(State)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>opiod_top8<span class="sc">$</span>State</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "West Virginia" "Alabama"       "Tennessee"     "Kentucky"     
[5] "Oklahoma"      "Arkansas"      "Mississippi"   "Louisiana"    </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>death_rate_top8 <span class="ot">=</span> selected_top5 <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(State)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>death_rate_top8<span class="sc">$</span>State</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Alaska"        "Kentucky"      "Mississippi"   "New Mexico"   
[5] "Oklahoma"      "Tennessee"     "West Virginia" "Wyoming"      </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">intersect</span>(opiod_top8<span class="sc">$</span>State,death_rate_top8<span class="sc">$</span>State)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "West Virginia" "Tennessee"     "Kentucky"      "Oklahoma"     
[5] "Mississippi"  </code></pre>
</div>
</div>
<p>We see that chooseing 8 states that have had the highest average death rate from 2006 to 2020, and choosing 8 states that have had the highest average opiod dispensing, 5 states intersect.</p>
</section>
<section id="analyzing-suicide" class="level3" data-number="3.1.7">
<h3 data-number="3.1.7" class="anchored" data-anchor-id="analyzing-suicide"><span class="header-section-number">3.1.7</span> Analyzing Suicide</h3>
<p>Didnt manage to arrive here today.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>top10_avg_suicide_states <span class="ot">=</span> cdc_dataset <span class="sc">%&gt;%</span> <span class="fu">filter</span>(State <span class="sc">!=</span> <span class="st">"United States"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Cause <span class="sc">==</span> <span class="st">"Suicide"</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(State) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">Avg =</span> <span class="fu">mean</span>(Age_Adj_Rate)) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(Avg)) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Avg <span class="sc">&gt;</span> <span class="fl">16.9</span>)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>top10_avg_suicide_states</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 2
   State        Avg
   &lt;chr&gt;      &lt;dbl&gt;
 1 Wyoming     22.6
 2 Alaska      22.6
 3 Montana     22.1
 4 New Mexico  20.6
 5 Nevada      19.4
 6 Idaho       18.5
 7 Utah        18.4
 8 Colorado    18.0
 9 Oklahoma    17.0
10 Arizona     16.9</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.vector</span>(top10_avg_suicide_states <span class="sc">%&gt;%</span> <span class="fu">distinct</span>(State))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$State
 [1] "Wyoming"    "Alaska"     "Montana"    "New Mexico" "Nevada"    
 [6] "Idaho"      "Utah"       "Colorado"   "Oklahoma"   "Arizona"   </code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>united_states_by_area <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"united-states-by-area.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 50 Columns: 14
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr  (1): state
dbl (13): fips, densityMi, pop2023, pop2022, pop2020, pop2019, pop2010, grow...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># View(united_states_by_area)</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>united_states_by_area_density <span class="ot">=</span> united_states_by_area <span class="sc">%&gt;%</span> <span class="fu">select</span>(state,densityMi) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(densityMi)</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>lowest_population_density_states <span class="ot">=</span> united_states_by_area_density[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,]</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>lowest_population_density_states</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 2
   state        densityMi
   &lt;chr&gt;            &lt;dbl&gt;
 1 Alaska            1.28
 2 Wyoming           6.01
 3 Montana           7.83
 4 North Dakota     11.3 
 5 South Dakota     12.2 
 6 New Mexico       17.4 
 7 Idaho            23.9 
 8 Nebraska         25.7 
 9 Nevada           29.2 
10 Kansas           35.9 </code></pre>
</div>
</div>
<section id="section" class="level14">
<p class="heading"></p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>united_states_by_area_density</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 50 × 2
   state        densityMi
   &lt;chr&gt;            &lt;dbl&gt;
 1 Alaska            1.28
 2 Wyoming           6.01
 3 Montana           7.83
 4 North Dakota     11.3 
 5 South Dakota     12.2 
 6 New Mexico       17.4 
 7 Idaho            23.9 
 8 Nebraska         25.7 
 9 Nevada           29.2 
10 Kansas           35.9 
# ℹ 40 more rows</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(united_states_by_area_density) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'State'</span>,<span class="st">'densityMi'</span>)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>united_states_by_area_density</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 50 × 2
   State        densityMi
   &lt;chr&gt;            &lt;dbl&gt;
 1 Alaska            1.28
 2 Wyoming           6.01
 3 Montana           7.83
 4 North Dakota     11.3 
 5 South Dakota     12.2 
 6 New Mexico       17.4 
 7 Idaho            23.9 
 8 Nebraska         25.7 
 9 Nevada           29.2 
10 Kansas           35.9 
# ℹ 40 more rows</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>avg_suicide_rate <span class="ot">=</span> cdc_dataset <span class="sc">%&gt;%</span> <span class="fu">filter</span>(State <span class="sc">!=</span> <span class="st">"United States"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Cause <span class="sc">==</span> <span class="st">"Suicide"</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(State) <span class="sc">%&gt;%</span> <span class="fu">summarize</span>(<span class="at">Avg =</span> <span class="fu">mean</span>(Age_Adj_Rate)) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(Avg))</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>avg_suicide_rate</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 51 × 2
   State        Avg
   &lt;chr&gt;      &lt;dbl&gt;
 1 Wyoming     22.6
 2 Alaska      22.6
 3 Montana     22.1
 4 New Mexico  20.6
 5 Nevada      19.4
 6 Idaho       18.5
 7 Utah        18.4
 8 Colorado    18.0
 9 Oklahoma    17.0
10 Arizona     16.9
# ℹ 41 more rows</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>merged_df <span class="ot">&lt;-</span> <span class="fu">merge</span>(united_states_by_area_density, avg_suicide_rate, <span class="at">by =</span> <span class="st">"State"</span>)</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>merged_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>            State  densityMi       Avg
1         Alabama  100.67620 13.677273
2          Alaska    1.28449 22.559091
3         Arizona   65.61541 16.927273
4        Arkansas   58.86715 15.818182
5      California  249.81347  9.977273
6        Colorado   56.62333 18.009091
7     Connecticut  749.49504  8.977273
8        Delaware  529.49461 11.472727
9         Florida  422.59351 13.577273
10        Georgia  191.91701 11.972727
11         Hawaii  223.14152 11.740909
12          Idaho   23.88287 18.527273
13       Illinois  224.74459  9.445455
14        Indiana  191.27287 13.268182
15           Iowa   57.34903 12.804545
16         Kansas   35.91504 14.759091
17       Kentucky  114.42109 14.840909
18      Louisiana  105.39265 12.586364
19          Maine   45.17855 14.472727
20       Maryland  634.04862  9.086364
21  Massachusetts  894.13564  7.822727
22       Michigan  177.41244 12.131818
23      Minnesota   71.87131 11.454545
24    Mississippi   62.45398 12.890909
25       Missouri   89.98998 14.854545
26        Montana    7.82919 22.145455
27       Nebraska   25.67286 11.750000
28         Nevada   29.23222 19.436364
29  New Hampshire  156.70245 13.845455
30     New Jersey 1258.55820  7.186364
31     New Mexico   17.39527 20.636364
32       New York  413.71663  7.263636
33 North Carolina  222.79940 12.386364
34   North Dakota   11.31271 15.136364
35           Ohio  287.50579 12.177273
36       Oklahoma   59.01851 16.977273
37         Oregon   44.00522 16.522727
38   Pennsylvania  289.02749 12.281818
39   Rhode Island 1054.62573  9.427273
40 South Carolina  178.70337 13.245455
41   South Dakota   12.18140 16.650000
42      Tennessee  173.01630 14.618182
43          Texas  116.75553 11.645455
44           Utah   41.65130 18.440909
45        Vermont   70.21330 14.845455
46       Virginia  220.55895 12.022727
47     Washington  117.83476 14.031818
48  West Virginia   73.41651 16.036364
49      Wisconsin  109.03241 12.913636
50        Wyoming    6.00743 22.604545</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(united_states_by_area_density<span class="sc">$</span>densityMi)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(merged_df, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">log</span>(densityMi), <span class="at">y =</span> Avg)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span> </span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust=</span>.<span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> merged_df<span class="sc">$</span>Avg</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">log</span>(merged_df<span class="sc">$</span>densityMi)</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>regression_model_cumul_growth <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> x)</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(y,x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  y and x
t = -11.724, df = 48, p-value = 1.081e-15
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.9190277 -0.7661560
sample estimates:
       cor 
-0.8609083 </code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(regression_model_cumul_growth)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = y ~ x)

Residuals:
    Min      1Q  Median      3Q     Max 
-5.2630 -1.2212  0.2523  1.3288  3.0195 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  24.4925     0.9385   26.10  &lt; 2e-16 ***
x            -2.3046     0.1966  -11.72 1.08e-15 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 1.915 on 48 degrees of freedom
Multiple R-squared:  0.7412,    Adjusted R-squared:  0.7358 
F-statistic: 137.4 on 1 and 48 DF,  p-value: 1.081e-15</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>summary_gdp <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"SASUMMARY__ALL_AREAS_1998_2022.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: One or more parsing issues, call `problems()` on your data frame for details,
e.g.:
  dat &lt;- vroom(...)
  problems(dat)</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 784 Columns: 33
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (31): GeoFIPS, GeoName, TableName, IndustryClassification, Description, ...
dbl  (2): Region, LineCode

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(summary_gdp)</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>summary_gdp_only <span class="ot">=</span> summary_gdp <span class="sc">%&gt;%</span> <span class="fu">filter</span>(Description <span class="sc">==</span> <span class="st">"Gross domestic product (GDP)"</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(GeoName,<span class="st">`</span><span class="at">2017</span><span class="st">`</span>,<span class="st">`</span><span class="at">2018</span><span class="st">`</span>,<span class="st">`</span><span class="at">2019</span><span class="st">`</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(GeoName <span class="sc">!=</span> <span class="st">'United States'</span>)</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>summary_gdp_only <span class="ot">=</span> summary_gdp_only <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">AvgGDP =</span> (<span class="fu">as.numeric</span>(<span class="st">`</span><span class="at">2017</span><span class="st">`</span>)<span class="sc">+</span><span class="fu">as.numeric</span>(<span class="st">`</span><span class="at">2018</span><span class="st">`</span>)<span class="sc">+</span><span class="fu">as.numeric</span>(<span class="st">`</span><span class="at">2019</span><span class="st">`</span>)) <span class="sc">/</span> <span class="dv">3</span>)</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>summary_gdp_only</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 51 × 5
   GeoName              `2017`    `2018`    `2019`      AvgGDP
   &lt;chr&gt;                &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;        &lt;dbl&gt;
 1 Alabama              216615.5  226263.8  234526.4   225802.
 2 Alaska               53550.9   54762.0   54469.9     54261.
 3 Arizona              333099.0  353671.0  375545.0   354105 
 4 Arkansas             123882.6  129213.8  132637.2   128578.
 5 California           2740550.3 2899530.9 3062158.9 2900747.
 6 Colorado             350209.1  373923.1  397701.6   373945.
 7 Connecticut          273875.1  280535.4  285466.4   279959.
 8 Delaware             69555.6   73376.0   78685.8     73872.
 9 District of Columbia 134298.8  141240.2  145171.0   140237.
10 Florida              1014866.9 1072085.6 1127988.6 1071647.
# ℹ 41 more rows</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(summary_gdp_only) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'State'</span>,<span class="st">'2017'</span>,<span class="st">'2018'</span>,<span class="st">'2019'</span>,<span class="st">'AvgGDP'</span>)</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>summary_gdp_only</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 51 × 5
   State                `2017`    `2018`    `2019`      AvgGDP
   &lt;chr&gt;                &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;        &lt;dbl&gt;
 1 Alabama              216615.5  226263.8  234526.4   225802.
 2 Alaska               53550.9   54762.0   54469.9     54261.
 3 Arizona              333099.0  353671.0  375545.0   354105 
 4 Arkansas             123882.6  129213.8  132637.2   128578.
 5 California           2740550.3 2899530.9 3062158.9 2900747.
 6 Colorado             350209.1  373923.1  397701.6   373945.
 7 Connecticut          273875.1  280535.4  285466.4   279959.
 8 Delaware             69555.6   73376.0   78685.8     73872.
 9 District of Columbia 134298.8  141240.2  145171.0   140237.
10 Florida              1014866.9 1072085.6 1127988.6 1071647.
# ℹ 41 more rows</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>merged_df2 <span class="ot">&lt;-</span> <span class="fu">merge</span>(merged_df, summary_gdp_only, <span class="at">by =</span> <span class="st">"State"</span>)</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>merged_df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>            State  densityMi       Avg      2017      2018      2019     AvgGDP
1         Alabama  100.67620 13.677273  216615.5  226263.8  234526.4  225801.90
2          Alaska    1.28449 22.559091   53550.9   54762.0   54469.9   54260.93
3         Arizona   65.61541 16.927273  333099.0  353671.0  375545.0  354105.00
4        Arkansas   58.86715 15.818182  123882.6  129213.8  132637.2  128577.87
5      California  249.81347  9.977273 2740550.3 2899530.9 3062158.9 2900746.70
6        Colorado   56.62333 18.009091  350209.1  373923.1  397701.6  373944.60
7     Connecticut  749.49504  8.977273  273875.1  280535.4  285466.4  279958.97
8        Delaware  529.49461 11.472727   69555.6   73376.0   78685.8   73872.47
9         Florida  422.59351 13.577273 1014866.9 1072085.6 1127988.6 1071647.03
10        Georgia  191.91701 11.972727  583543.3  612803.4  646939.0  614428.57
11         Hawaii  223.14152 11.740909   87436.4   90933.5   93356.2   90575.37
12          Idaho   23.88287 18.527273   72935.1   79072.4   84550.2   78852.57
13       Illinois  224.74459  9.445455  832826.8  871024.2  895800.0  866550.33
14        Indiana  191.27287 13.268182  357535.8  377376.9  385446.2  373452.97
15           Iowa   57.34903 12.804545  187125.0  193155.1  196085.1  192121.73
16         Kansas   35.91504 14.759091  166273.6  173373.0  176917.7  172188.10
17       Kentucky  114.42109 14.840909  203564.0  210509.1  220683.3  211585.47
18      Louisiana  105.39265 12.586364  239830.7  256444.4  257096.7  251123.93
19          Maine   45.17855 14.472727   63000.6   66216.0   69298.2   66171.60
20       Maryland  634.04862  9.086364  399714.5  410771.8  419447.6  409977.97
21  Massachusetts  894.13564  7.822727  530129.4  559605.0  588617.5  559450.63
22       Michigan  177.41244 12.131818  505101.5  525240.8  536975.6  522439.30
23      Minnesota   71.87131 11.454545  354721.9  372439.2  383961.6  370374.23
24    Mississippi   62.45398 12.890909  110281.4  113166.4  115441.7  112963.17
25       Missouri   89.98998 14.854545  311273.8  320451.6  334364.7  322030.03
26        Montana    7.82919 22.145455   48470.5   51152.1   52772.5   50798.37
27       Nebraska   25.67286 11.750000  123219.9  127954.4  132741.0  127971.77
28         Nevada   29.23222 19.436364  163199.1  172547.9  184343.9  173363.63
29  New Hampshire  156.70245 13.845455   81179.6   83859.4   87472.0   84170.33
30     New Jersey 1258.55820  7.186364  590086.7  619340.2  641877.6  617101.50
31     New Mexico   17.39527 20.636364   93210.1   98838.2  103869.2   98639.17
32       New York  413.71663  7.263636 1624800.7 1710665.6 1793261.3 1709575.87
33 North Carolina  222.79940 12.386364  546810.1  568037.3  593126.9  569324.77
34   North Dakota   11.31271 15.136364   56530.2   60377.1   60516.3   59141.20
35           Ohio  287.50579 12.177273  652187.5  672540.1  703127.8  675951.80
36       Oklahoma   59.01851 16.977273  192538.6  204193.9  205262.6  200665.03
37         Oregon   44.00522 16.522727  225534.5  238466.9  248939.8  237647.07
38   Pennsylvania  289.02749 12.281818  754318.0  780620.7  803078.0  779338.90
39   Rhode Island 1054.62573  9.427273   58771.6   60064.9   62526.9   60454.47
40 South Carolina  178.70337 13.245455  224937.6  236561.7  248046.5  236515.27
41   South Dakota   12.18140 16.650000   51615.1   53349.5   55007.4   53324.00
42      Tennessee  173.01630 14.618182  355417.5  369713.2  385819.5  370316.73
43          Texas  116.75553 11.645455 1667313.0 1808026.9 1860108.3 1778482.73
44           Utah   41.65130 18.440909  172075.0  186805.7  201285.4  186722.03
45        Vermont   70.21330 14.845455   32589.2   33482.6   34628.1   33566.63
46       Virginia  220.55895 12.022727  515167.2  537158.3  561989.6  538105.03
47     Washington  117.83476 14.031818  527169.4  570337.8  608966.4  568824.53
48  West Virginia   73.41651 16.036364   75172.4   79794.3   79883.8   78283.50
49      Wisconsin  109.03241 12.913636  321886.8  335144.3  347398.6  334809.90
50        Wyoming    6.00743 22.604545   37620.3   39614.5   39971.4   39068.73</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(merged_df2<span class="sc">$</span>AvgGDP)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid" width="672"></p>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>merged_df2 <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(AvgGDP))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>            State  densityMi       Avg      2017      2018      2019     AvgGDP
1      California  249.81347  9.977273 2740550.3 2899530.9 3062158.9 2900746.70
2           Texas  116.75553 11.645455 1667313.0 1808026.9 1860108.3 1778482.73
3        New York  413.71663  7.263636 1624800.7 1710665.6 1793261.3 1709575.87
4         Florida  422.59351 13.577273 1014866.9 1072085.6 1127988.6 1071647.03
5        Illinois  224.74459  9.445455  832826.8  871024.2  895800.0  866550.33
6    Pennsylvania  289.02749 12.281818  754318.0  780620.7  803078.0  779338.90
7            Ohio  287.50579 12.177273  652187.5  672540.1  703127.8  675951.80
8      New Jersey 1258.55820  7.186364  590086.7  619340.2  641877.6  617101.50
9         Georgia  191.91701 11.972727  583543.3  612803.4  646939.0  614428.57
10 North Carolina  222.79940 12.386364  546810.1  568037.3  593126.9  569324.77
11     Washington  117.83476 14.031818  527169.4  570337.8  608966.4  568824.53
12  Massachusetts  894.13564  7.822727  530129.4  559605.0  588617.5  559450.63
13       Virginia  220.55895 12.022727  515167.2  537158.3  561989.6  538105.03
14       Michigan  177.41244 12.131818  505101.5  525240.8  536975.6  522439.30
15       Maryland  634.04862  9.086364  399714.5  410771.8  419447.6  409977.97
16       Colorado   56.62333 18.009091  350209.1  373923.1  397701.6  373944.60
17        Indiana  191.27287 13.268182  357535.8  377376.9  385446.2  373452.97
18      Minnesota   71.87131 11.454545  354721.9  372439.2  383961.6  370374.23
19      Tennessee  173.01630 14.618182  355417.5  369713.2  385819.5  370316.73
20        Arizona   65.61541 16.927273  333099.0  353671.0  375545.0  354105.00
21      Wisconsin  109.03241 12.913636  321886.8  335144.3  347398.6  334809.90
22       Missouri   89.98998 14.854545  311273.8  320451.6  334364.7  322030.03
23    Connecticut  749.49504  8.977273  273875.1  280535.4  285466.4  279958.97
24      Louisiana  105.39265 12.586364  239830.7  256444.4  257096.7  251123.93
25         Oregon   44.00522 16.522727  225534.5  238466.9  248939.8  237647.07
26 South Carolina  178.70337 13.245455  224937.6  236561.7  248046.5  236515.27
27        Alabama  100.67620 13.677273  216615.5  226263.8  234526.4  225801.90
28       Kentucky  114.42109 14.840909  203564.0  210509.1  220683.3  211585.47
29       Oklahoma   59.01851 16.977273  192538.6  204193.9  205262.6  200665.03
30           Iowa   57.34903 12.804545  187125.0  193155.1  196085.1  192121.73
31           Utah   41.65130 18.440909  172075.0  186805.7  201285.4  186722.03
32         Nevada   29.23222 19.436364  163199.1  172547.9  184343.9  173363.63
33         Kansas   35.91504 14.759091  166273.6  173373.0  176917.7  172188.10
34       Arkansas   58.86715 15.818182  123882.6  129213.8  132637.2  128577.87
35       Nebraska   25.67286 11.750000  123219.9  127954.4  132741.0  127971.77
36    Mississippi   62.45398 12.890909  110281.4  113166.4  115441.7  112963.17
37     New Mexico   17.39527 20.636364   93210.1   98838.2  103869.2   98639.17
38         Hawaii  223.14152 11.740909   87436.4   90933.5   93356.2   90575.37
39  New Hampshire  156.70245 13.845455   81179.6   83859.4   87472.0   84170.33
40          Idaho   23.88287 18.527273   72935.1   79072.4   84550.2   78852.57
41  West Virginia   73.41651 16.036364   75172.4   79794.3   79883.8   78283.50
42       Delaware  529.49461 11.472727   69555.6   73376.0   78685.8   73872.47
43          Maine   45.17855 14.472727   63000.6   66216.0   69298.2   66171.60
44   Rhode Island 1054.62573  9.427273   58771.6   60064.9   62526.9   60454.47
45   North Dakota   11.31271 15.136364   56530.2   60377.1   60516.3   59141.20
46         Alaska    1.28449 22.559091   53550.9   54762.0   54469.9   54260.93
47   South Dakota   12.18140 16.650000   51615.1   53349.5   55007.4   53324.00
48        Montana    7.82919 22.145455   48470.5   51152.1   52772.5   50798.37
49        Wyoming    6.00743 22.604545   37620.3   39614.5   39971.4   39068.73
50        Vermont   70.21330 14.845455   32589.2   33482.6   34628.1   33566.63</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>merged_df2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>            State  densityMi       Avg      2017      2018      2019     AvgGDP
1         Alabama  100.67620 13.677273  216615.5  226263.8  234526.4  225801.90
2          Alaska    1.28449 22.559091   53550.9   54762.0   54469.9   54260.93
3         Arizona   65.61541 16.927273  333099.0  353671.0  375545.0  354105.00
4        Arkansas   58.86715 15.818182  123882.6  129213.8  132637.2  128577.87
5      California  249.81347  9.977273 2740550.3 2899530.9 3062158.9 2900746.70
6        Colorado   56.62333 18.009091  350209.1  373923.1  397701.6  373944.60
7     Connecticut  749.49504  8.977273  273875.1  280535.4  285466.4  279958.97
8        Delaware  529.49461 11.472727   69555.6   73376.0   78685.8   73872.47
9         Florida  422.59351 13.577273 1014866.9 1072085.6 1127988.6 1071647.03
10        Georgia  191.91701 11.972727  583543.3  612803.4  646939.0  614428.57
11         Hawaii  223.14152 11.740909   87436.4   90933.5   93356.2   90575.37
12          Idaho   23.88287 18.527273   72935.1   79072.4   84550.2   78852.57
13       Illinois  224.74459  9.445455  832826.8  871024.2  895800.0  866550.33
14        Indiana  191.27287 13.268182  357535.8  377376.9  385446.2  373452.97
15           Iowa   57.34903 12.804545  187125.0  193155.1  196085.1  192121.73
16         Kansas   35.91504 14.759091  166273.6  173373.0  176917.7  172188.10
17       Kentucky  114.42109 14.840909  203564.0  210509.1  220683.3  211585.47
18      Louisiana  105.39265 12.586364  239830.7  256444.4  257096.7  251123.93
19          Maine   45.17855 14.472727   63000.6   66216.0   69298.2   66171.60
20       Maryland  634.04862  9.086364  399714.5  410771.8  419447.6  409977.97
21  Massachusetts  894.13564  7.822727  530129.4  559605.0  588617.5  559450.63
22       Michigan  177.41244 12.131818  505101.5  525240.8  536975.6  522439.30
23      Minnesota   71.87131 11.454545  354721.9  372439.2  383961.6  370374.23
24    Mississippi   62.45398 12.890909  110281.4  113166.4  115441.7  112963.17
25       Missouri   89.98998 14.854545  311273.8  320451.6  334364.7  322030.03
26        Montana    7.82919 22.145455   48470.5   51152.1   52772.5   50798.37
27       Nebraska   25.67286 11.750000  123219.9  127954.4  132741.0  127971.77
28         Nevada   29.23222 19.436364  163199.1  172547.9  184343.9  173363.63
29  New Hampshire  156.70245 13.845455   81179.6   83859.4   87472.0   84170.33
30     New Jersey 1258.55820  7.186364  590086.7  619340.2  641877.6  617101.50
31     New Mexico   17.39527 20.636364   93210.1   98838.2  103869.2   98639.17
32       New York  413.71663  7.263636 1624800.7 1710665.6 1793261.3 1709575.87
33 North Carolina  222.79940 12.386364  546810.1  568037.3  593126.9  569324.77
34   North Dakota   11.31271 15.136364   56530.2   60377.1   60516.3   59141.20
35           Ohio  287.50579 12.177273  652187.5  672540.1  703127.8  675951.80
36       Oklahoma   59.01851 16.977273  192538.6  204193.9  205262.6  200665.03
37         Oregon   44.00522 16.522727  225534.5  238466.9  248939.8  237647.07
38   Pennsylvania  289.02749 12.281818  754318.0  780620.7  803078.0  779338.90
39   Rhode Island 1054.62573  9.427273   58771.6   60064.9   62526.9   60454.47
40 South Carolina  178.70337 13.245455  224937.6  236561.7  248046.5  236515.27
41   South Dakota   12.18140 16.650000   51615.1   53349.5   55007.4   53324.00
42      Tennessee  173.01630 14.618182  355417.5  369713.2  385819.5  370316.73
43          Texas  116.75553 11.645455 1667313.0 1808026.9 1860108.3 1778482.73
44           Utah   41.65130 18.440909  172075.0  186805.7  201285.4  186722.03
45        Vermont   70.21330 14.845455   32589.2   33482.6   34628.1   33566.63
46       Virginia  220.55895 12.022727  515167.2  537158.3  561989.6  538105.03
47     Washington  117.83476 14.031818  527169.4  570337.8  608966.4  568824.53
48  West Virginia   73.41651 16.036364   75172.4   79794.3   79883.8   78283.50
49      Wisconsin  109.03241 12.913636  321886.8  335144.3  347398.6  334809.90
50        Wyoming    6.00743 22.604545   37620.3   39614.5   39971.4   39068.73</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> merged_df2<span class="sc">$</span>Avg</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">log</span>(merged_df2<span class="sc">$</span>densityMi)</span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>z <span class="ot">=</span> <span class="fu">log</span>(merged_df2<span class="sc">$</span>AvgGDP)</span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>regression_model_cumul_growth_densityMil_AvgGDP <span class="ot">&lt;-</span> <span class="fu">lm</span>(y <span class="sc">~</span> x <span class="sc">+</span> z)</span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(regression_model_cumul_growth_densityMil_AvgGDP)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = y ~ x + z)

Residuals:
    Min      1Q  Median      3Q     Max 
-5.2688 -1.1119  0.0983  1.1103  3.3515 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  28.4530     3.3949   8.381 6.92e-11 ***
x            -2.1344     0.2407  -8.867 1.34e-11 ***
z            -0.3833     0.3159  -1.213    0.231    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 1.905 on 47 degrees of freedom
Multiple R-squared:  0.749, Adjusted R-squared:  0.7383 
F-statistic: 70.14 on 2 and 47 DF,  p-value: 7.786e-15</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> merged_df2<span class="sc">$</span>Avg</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">log</span>(merged_df2<span class="sc">$</span>AvgGDP)</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a><span class="co"># x = merged_df2$AvgGDP</span></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">lm</span>(y <span class="sc">~</span> x))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = y ~ x)

Residuals:
    Min      1Q  Median      3Q     Max 
-7.2588 -1.9921 -0.0845  1.8413  5.6551 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  38.8748     5.1525   7.545 1.08e-09 ***
x            -2.0154     0.4153  -4.853 1.33e-05 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 3.082 on 48 degrees of freedom
Multiple R-squared:  0.3292,    Adjusted R-squared:  0.3152 
F-statistic: 23.55 on 1 and 48 DF,  p-value: 1.326e-05</code></pre>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(merged_df2, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">log</span>(AvgGDP), <span class="at">y =</span> Avg)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span> </span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust=</span>.<span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="results_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid" width="672"></p>
</div>
</div>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./data.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Data</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./d3graph.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Interactive graph</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">This book was built with <a href="https://quarto.org/">Quarto</a>.</div>
  </div>
</footer>



</body></html>