[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "CDC Causes of Death",
    "section": "",
    "text": "1 Introduction"
  },
  {
    "objectID": "data.html#description",
    "href": "data.html#description",
    "title": "2  Data",
    "section": "2.1 Description",
    "text": "2.1 Description"
  },
  {
    "objectID": "data.html#missing-value-analysis",
    "href": "data.html#missing-value-analysis",
    "title": "2  Data",
    "section": "2.2 Missing value analysis",
    "text": "2.2 Missing value analysis"
  },
  {
    "objectID": "results.html",
    "href": "results.html",
    "title": "3  Results",
    "section": "",
    "text": "Code\nlibrary(dplyr)\nlibrary(readr)\nlibrary(dplyr)\nlibrary(forcats)\nlibrary(ggplot2)\nlibrary(scales)\nlibrary(tidyr)\n\n\n\n\nCode\nlead_cod_2 = read_csv(\"NCHS_-_Leading_Causes_of_Death__United_States.csv\")\n\n# BY STATE\nlead_cod_2_by_state = lead_cod_2 %&gt;% filter(State != \"United States\")\n# lead_cod_2_by_state\n\n# LOOKING AT USA\nlead_cod_2_USA = lead_cod_2 %&gt;% filter(State == \"United States\")\n#lead_cod_2_USA\n\n# FILTER FOR 2008-2017\nlead_cod_2_USA_from_2008 = lead_cod_2_USA %&gt;% filter(Year &gt;= 2008)\nlead_cod_2_by_state_from_2008 = lead_cod_2_by_state %&gt;% filter(Year &gt;= 2008)\n\n\n\n\nCode\n####################################################\n\n# \"Total Aggregate Deaths by Cause from 1999 through 2017\"\n# Group to do a factor reorder\nlead_cod_2_USA_from_2008_mod &lt;- lead_cod_2_USA %&gt;% \n  #filter(Year &gt;= 2008) %&gt;%\n  mutate(`Cause Name` = as.factor(`Cause Name`)) %&gt;% # Ensure 'Cause Name' is a factor\n  group_by(`Cause Name`) %&gt;%\n  summarise(Total_Deaths = sum(Deaths, na.rm = TRUE)) %&gt;%\n  mutate(`Cause Name` = fct_reorder(`Cause Name`, Total_Deaths, .desc=TRUE)) %&gt;%\n  ungroup()\n\n# Now create the ggplot\nggplot(lead_cod_2_USA_from_2008_mod %&gt;% filter(`Cause Name` != \"All causes\"), aes(x = `Cause Name`, y = Total_Deaths)) +\n  geom_bar(stat = \"identity\", position = \"dodge\") +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\n  labs(x = \"Cause Name\", y = \"Total Deaths\", title = \"Top 10 Causes of Deaths from 1999 through 2017\")\n\n\n\n\n\nCode\n###################################################\n\n\nThe bar chart above identifies 10 most common causes of death in the United States aggregated from year 1999 to 2017. It’s is visible that heart disease and cancer account for a significant bulk of all deaths\n\n\nCode\n# DEATHS INCREASING OVER THE YEARS\nyearly_data &lt;- lead_cod_2_USA %&gt;%\n  group_by(Year) %&gt;%\n  summarise(Total_Deaths = sum(Deaths, na.rm = TRUE))\n\n# # Create a bar chart\n# ggplot(yearly_data, aes(x = Year, y = Total_Deaths)) +\n#   geom_bar(stat = \"identity\", position = \"dodge\") +\n#   scale_x_continuous(breaks = 1999:max(yearly_data$Year), limits = c(1998, 2018)) +\n#   theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\n#   labs(x = \"Year\", y = \"Total Deaths\", title = \"Total Deaths per Year from 2008 Onwards\")\n\n# A time series plot\nggplot(yearly_data, aes(x = Year, y = Total_Deaths)) +\n  geom_line() +  \n  geom_point() +  \n  scale_x_continuous(breaks = 1999:max(yearly_data$Year), limits = c(1998, 2018)) +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\n  labs(x = \"Year\", y = \"Total Deaths\", title = \"Total Deaths for each Year from 1999 through 2017\") +\n  scale_y_continuous(breaks = seq(4e6, 5e6, by = 200000), \n                     limits = c(4e6, 5e6))\n\n\n\n\n\nThe deaths have been rising over this period of time, which makes sense because the US population has been steadily growing\n\n\nCode\n# THIS IS BETTER\n\nlead_cod_2_USA_facet_prepare &lt;- lead_cod_2_USA %&gt;% \n  group_by(Year, `Cause Name`) %&gt;%\n  summarise(Total_Deaths = sum(Deaths, na.rm = TRUE)) \n\n\n`summarise()` has grouped output by 'Year'. You can override using the\n`.groups` argument.\n\n\nCode\ncause_order = c(\"All causes\",\"Heart disease\",\"Cancer\",\"Stroke\", \n                \"CLRD\", \"Unintentional injuries\",\"Alzheimer's disease\", \n                \"Diabetes\", \"Influenza and pneumonia\", \"Kidney disease\",\"Suicide\" )\n\nlead_cod_2_USA_facet_prepare$`Cause Name` &lt;- factor(lead_cod_2_USA_facet_prepare$`Cause Name`, levels = cause_order)\n\n\nset.seed(1)\nmy_colors = sapply(1:19, function(x) rgb(runif(1), runif(1), runif(1)))\n\n# BAR CHART\n# ggplot(lead_cod_2_USA_facet_prepare %&gt;% filter(`Cause Name` != \"All causes\"), aes(x = Year, y = Total_Deaths, fill = as.factor(Year))) +\n#   geom_bar(stat = \"identity\", position = \"dodge\") +\n#   scale_fill_manual(values = my_colors) +  # Use manual colors\n#   theme(axis.text.x = element_text(angle = 45, hjust = 1),\n#         legend.key.size = unit(0.5, \"cm\"),  # Smaller legend keys\n#         legend.text = element_text(size = 8)) +  # Smaller legend text +\n#   labs(x = \"Year\", y = \"Total Deaths\", fill = \"Year\",\n#        title = \"Deaths by Cause from 1999-2017\") +\n#   facet_wrap(~ `Cause Name`, scales = \"free_y\", ncol = 3)  # Add faceting\n\n\n# POINTS\nggplot(lead_cod_2_USA_facet_prepare %&gt;% filter(`Cause Name` != \"All causes\"), aes(x = Year, y = Total_Deaths, color = as.factor(Year))) +\n  geom_line() +  # Use geom_line for a time series plot\n  geom_point() +  # Optionally add points to highlight each data point\n  scale_color_manual(values = my_colors) +  # Use manual colors\n  theme(axis.text.x = element_text(angle = 45, hjust = 1),\n        legend.key.size = unit(0.5, \"cm\"),  # Smaller legend keys\n        legend.text = element_text(size = 8)) +\n  labs(x = \"Year\", y = \"Total Deaths\", color = \"Year\",\n       title = \"Deaths by Cause from 1999-2017\") +\n  facet_wrap(~ `Cause Name`, scales = \"free_y\", ncol = 3)  # Add faceting\n\n\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n`geom_line()`: Each group consists of only one observation.\nℹ Do you need to adjust the group aesthetic?\n\n\n\n\n\nThe time series plot helps us have an understanding of the magnitude of each category and the evolution across time. We can see that heart disease and cancer are around 15x Suicide making it challenging to analyze the growth of smaller series. We will create a cumulative chart to understand the evolution of each category. A cumulative percentage time series chart will help us compare relative changes of different causes.\n\n\nCode\n# A MODIFICATION\ndf = lead_cod_2 |&gt; filter(State != \"United States\")\ndf$Cause &lt;- df$`Cause Name`\ndf$Age &lt;- df$`Age-adjusted Death Rate`\ndf = df |&gt; select(-`113 Cause Name`) |&gt; select(-`Cause Name`) |&gt; select(-`Age-adjusted Death Rate`)\ndf = df |&gt; filter(Cause != 'All causes')\n\n#Aggregating by year and category\ndf_grouped = df |&gt; group_by(Year, Cause) |&gt; summarise(TotalDeaths = sum(Deaths, na.rm = TRUE), .groups = 'drop')\n\ncolor_blind_friendly &lt;- c(\"#E69F00\", \"#56B4E9\", \"#009E73\", \"#F0E442\", \n                          \"#0072B2\", \"#D55E00\", \"#CC79A7\", \"#999999\", \n                          \"#882255\", \"#88CCEE\")\n\n#Time series\nggplot(df_grouped, aes(x = Year, y = TotalDeaths, group = Cause, color = Cause)) +\n  geom_line(size = 1.5) + theme_minimal() + \n  labs(title = \"Deaths by Category Over Time\", x = \"Year\", y = \"Deaths\", color = \"Category\") +\n  scale_y_continuous(labels = scales::comma, breaks = scales::pretty_breaks(n = 8)) + \n  scale_x_continuous(breaks = scales::pretty_breaks(n = 9)) +\n  scale_color_manual(values = color_blind_friendly)\n\n\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nℹ Please use `linewidth` instead.\n\n\n\n\n\n\n\nCode\n#First we have to calculate the percetage change for each period, and the accumulate it through the years:\ndf_wide &lt;- df_grouped |&gt; pivot_wider(names_from = Cause, values_from = TotalDeaths, values_fill = list(TotalDeaths = 0))\ndf_wide &lt;- df_wide |&gt; mutate(across(-Year, ~(. / lag(.) - 1)))\ndf_wide[is.na(df_wide)] &lt;- 0\ndf_wide &lt;- df_wide |&gt; mutate(across(-Year, ~cumprod(1 + .) - 1))\ndf_wide &lt;- df_wide |&gt; pivot_longer(cols = -Year, names_to = \"Cause\", values_to = \"CumulativeGrowth\")\n\ncolor_blind_friendly &lt;- c(\"#E69F00\", \"#56B4E9\", \"#009E73\", \"#F0E442\", \n                          \"#0072B2\", \"#D55E00\", \"#CC79A7\", \"#999999\", \n                          \"#882255\", \"#88CCEE\")\n\nggplot(df_wide, aes(x = Year, y = CumulativeGrowth, color = Cause)) +\n  geom_line(size = 1.5) + theme_minimal() + \n  labs(title = \"Cumulative Growth of Categories Over Time\", x = \"Year\", y = \"Cumulative Growth\") +\n  scale_y_continuous(labels = scales::percent_format(), breaks = scales::pretty_breaks(n = 8)) + \n  scale_x_continuous(breaks = scales::pretty_breaks(n = 8)) +\n  scale_color_manual(values = color_blind_friendly)\n\n\n\n\n\nWith the cumulative percentage time series graph broken down by cause, we can see some interesting trends. In particular, deaths caused by Alzheimer’s disease is aggressively increasing year by year. Unintentional injuries and suicide is also the number two and number three fastest growing causes of death, respectively. Additionally, we can note that stroke, influenza and pneumonia, and heart disease have actually been decreasing during the same time of 1999-2017.\n***** Needs work:: With the cumulative percentage evolution of deaths we can better understand the trends over time. We can make the following observations:\n\nDeaths from chronic causes is the category that has remained most stable over time. This is despite the fact that the previous graph seemed to say that this category was the one that grew the most (an effect produced by the difference in magnitudes). However, there has been an upward trend since 2010.\nDeaths from acute diseases showed a decreasing trend until 2012, but then began to grow again\nAccidents and deaths from suicide (Mental) are growing at uncontrolled rates.\n\nFrom this arise two interesting questions to ask:\n\nWhich states lead the growth in deaths from Alzheimer, suicide and unintentional accidents?\nCan we find a few interesting associated factors that are correlated?\n\nTo answer the first question, we can build a Cleveland plot to understand which states are leading:\n\n\nCode\n# Filter the data for the specified conditions\ndf_rank &lt;- df %&gt;% select(-Age)|&gt; filter(Year %in% c(1999, 2017), Cause == \"Suicide\")\n\n# Calculate the percentual difference change from 2000 to 2017 for each state\ndf_rank &lt;- df_rank %&gt;%\n  pivot_wider(names_from = Year, values_from = Deaths) |&gt;\n  mutate(PercentChange = `2017`/`1999`-1) |&gt;\n  arrange(desc(PercentChange))\n\n\n\n# Create a vertical bar chart\nggplot(df_rank, aes(x = PercentChange, y = reorder(State, PercentChange))) +\n  geom_point(size = 3, color = \"brown\") +\n  geom_point(aes(color = \"green\"), size = 2) +\n  labs(title = \"Suicide Deaths %Chg. - 1999 to 2017\", x = \"Percentual Change\", y = 'State') +\n  theme_bw() +\n  theme(panel.grid.major.x = element_blank(),\n    panel.grid.minor.x = element_blank(),\n    panel.grid.major.y = element_line(colour = \"grey60\", linetype = \"dashed\"))+\n  scale_x_continuous(labels = scales::percent_format(), breaks = scales::pretty_breaks(n = 8))+ \n  theme(legend.position = \"none\")\n\n\n\n\n\nCode\n#https://r-graphics.org/recipe-bar-graph-dot-plot\n\n\nWe can see that Utah, Idaho and North Dakota have seen the largest increase, while Delaware, Rhode Island and Louisiana the smallest.\n\n\nCode\n# Filter the data for the specified conditions\ndf_rank &lt;- df %&gt;% select(-Age)|&gt; filter(Year %in% c(1999, 2017), Cause == \"Alzheimer's disease\")\n\n# Calculate the percentual difference change from 2000 to 2017 for each state\ndf_rank &lt;- df_rank %&gt;%\n  pivot_wider(names_from = Year, values_from = Deaths) |&gt;\n  mutate(PercentChange = `2017`/`1999`-1) |&gt;\n  arrange(desc(PercentChange))\n\n\n\n# Create a vertical bar chart\nggplot(df_rank, aes(x = PercentChange, y = reorder(State, PercentChange))) +\n  geom_point(size = 3, color = \"purple\") +\n  labs(title = \"Alzheimer's disease Deaths %Chg. - 1999 to 2017\", x = \"Percentual Change\", y = 'State') +\n  theme_bw() +\n  theme(panel.grid.major.x = element_blank(),\n    panel.grid.minor.x = element_blank(),\n    panel.grid.major.y = element_line(colour = \"grey60\", linetype = \"dashed\"))+\n  scale_x_continuous(labels = scales::percent_format(), breaks = scales::pretty_breaks(n = 8))+ \n  theme(legend.position = \"none\")\n\n\n\n\n\nCode\n#https://r-graphics.org/recipe-bar-graph-dot-plot\n\n\nWe can see that Mississippi, Nevada and Hawaii have seen the largest increase, while Massachussetts, Maine and Montana are the smallest.\n\n\nCode\n# Filter the data for the specified conditions\ndf_rank &lt;- df %&gt;% select(-Age)|&gt; filter(Year %in% c(1999, 2017), Cause == \"Unintentional injuries\")\n\n# Calculate the percentual difference change from 2000 to 2017 for each state\ndf_rank &lt;- df_rank %&gt;%\n  pivot_wider(names_from = Year, values_from = Deaths) |&gt;\n  mutate(PercentChange = `2017`/`1999`-1) |&gt;\n  arrange(desc(PercentChange))\n\n# Create a vertical bar chart\nggplot(df_rank, aes(x = PercentChange, y = reorder(State, PercentChange))) +\n  geom_point(size = 3, color = \"darkblue\") +\n  labs(title = \"Unintentional injuries %Chg. - 1999 to 2017\", x = \"Percentual Change\", y = 'State') +\n  theme_bw() +\n  theme(panel.grid.major.x = element_blank(),\n    panel.grid.minor.x = element_blank(),\n    panel.grid.major.y = element_line(colour = \"grey60\", linetype = \"dashed\"))+\n  scale_x_continuous(labels = scales::percent_format(), breaks = scales::pretty_breaks(n = 8))+ \n  theme(legend.position = \"none\")\n\n\n\n\n\nCode\n#https://r-graphics.org/recipe-bar-graph-dot-plot\n\n\nWe can see that Rhode Island, Massachussetts, and New Hampshire have seen the largest increase, while Nebraska, Alabama and Mississippi are the smallest.\n\n\nCode\n# Average percent change increase for Unintentional Accidents\n# mean(df_rank$PercentChange)\n\ndf_rank &lt;- df %&gt;% select(-Age)|&gt; filter(Year %in% c(1999, 2017))\n\n# Calculate the percentual difference change from 2000 to 2017 for each state\ndf_rank &lt;- df_rank %&gt;%\n  pivot_wider(names_from = Year, values_from = Deaths) |&gt;\n  mutate(PercentChange = `2017`/`1999`-1) |&gt;\n  arrange(desc(PercentChange))\n\n#df_rank\n\ndf_rank_average_increase = df_rank %&gt;% group_by(Cause) %&gt;% summarise(AvgPercentChange = mean(PercentChange))\n#df_rank_average_increase\n\ndf_rank_average_increase$Cause &lt;- fct_reorder(df_rank_average_increase$Cause, df_rank_average_increase$AvgPercentChange)\n\n\n# Create the bar chart\nggplot(df_rank_average_increase, aes(x = Cause, y = AvgPercentChange)) +\n  geom_bar(stat = \"identity\") +\n  theme(axis.text.x = element_text(angle = 0, hjust = 1, vjust = 1)) +\n  labs(x = \"Cause\", y = \"Average % Change\", title = \"Average Percent Change Across All States from 1999 to 2017\") +\n  scale_y_continuous(breaks = seq(-0.25, 2, by = 0.25), limits = c(-0.2, 1.75)) +\n  coord_flip()  # Flips the axes so the bars are horizontal\n\n\n\n\n\nA more compact way to visualize the average percent change across states for each cause. It’s clear that the rise in deaths due to Alzheimer’s is quite remarkable.\n\n\nCode\ndf_life_expectancy &lt;- read_csv(\"NCHS_-_Death_rates_and_life_expectancy_at_birth_20231111.csv\")\n\n\nRows: 1071 Columns: 5\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (2): Race, Sex\ndbl (3): Year, Average Life Expectancy (Years), Age-adjusted Death Rate\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n\nCode\n# View(df_life_expectancy)\n# \n# df_life_expectancy\n\ndf_life_expectancy_1999_to_2017 = df_life_expectancy %&gt;% filter(Race == \"All Races\") %&gt;% filter(Sex == \"Both Sexes\") %&gt;% filter(Year &gt;= 1999) %&gt;% filter(Year &lt;= 2017)\n# df_life_expectancy_1999_to_2017\n\nlead_cod_2_USA_Alzheimer = lead_cod_2_USA_facet_prepare %&gt;% filter(`Cause Name` == \"Alzheimer's disease\")\n# lead_cod_2_USA_Alzheimer\n\n#life_expectacy_usa_alzheimer_joined \nlife_expectacy_usa_alzheimer_joined = inner_join(lead_cod_2_USA_Alzheimer,df_life_expectancy_1999_to_2017)\n\n\nJoining with `by = join_by(Year)`\n\n\nCode\n#life_expectacy_usa_alzheimer_joined\n\nlife_expectacy_usa_alzheimer_joined = life_expectacy_usa_alzheimer_joined %&gt;% select(-Race,-Sex,-`Age-adjusted Death Rate`)\n#life_expectacy_usa_alzheimer_joined\n\ndf_life_expectancy_1939_to_1957 = df_life_expectancy %&gt;% filter(Race == \"All Races\") %&gt;% filter(Sex == \"Both Sexes\") %&gt;% filter(Year &gt;= 1939) %&gt;% filter(Year &lt;= 1957)  %&gt;% select(-Race,-Sex,-`Age-adjusted Death Rate`)\n#df_life_expectancy_1934_to_1952\n\n\n\nlife_expectacy_usa_alzheimer_joined_bind = cbind(life_expectacy_usa_alzheimer_joined, df_life_expectancy_1939_to_1957)\n\n\nNew names:\n• `Year` -&gt; `Year...1`\n• `Average Life Expectancy (Years)` -&gt; `Average Life Expectancy (Years)...4`\n• `Year` -&gt; `Year...5`\n• `Average Life Expectancy (Years)` -&gt; `Average Life Expectancy (Years)...6`\n\n\nCode\n#life_expectacy_usa_alzheimer_joined_bind\n\ndf_wide_alzheimer = df_wide %&gt;% filter(Cause == \"Alzheimer's disease\")\n# df_wide_alzheimer\n\nlife_expectacy_usa_alzheimer_joined_bind_cumul_growth = cbind(life_expectacy_usa_alzheimer_joined_bind,df_wide_alzheimer)\n# life_expectacy_usa_alzheimer_joined_bind_cumul_growth\n\n\n\n\nCode\n# Assuming your data frame is called df and it has two continuous variables: Variable1 and Variable2\n# Create a scatterplot with a regression line\nggplot(life_expectacy_usa_alzheimer_joined_bind_cumul_growth, aes(x = `Average Life Expectancy (Years)...6`, y = CumulativeGrowth)) +\n  geom_point() +  # Add the scatterplot points\n  geom_smooth(method = \"lm\") +  # Add the linear regression line without the standard error\n  labs(x = \"Average Life Expectancy\", y = \"Cumulative Growth\", title = \"Scatterplot w/ Regression Line for Alzheimer's Deaths vs Life Expectancy\") \n\n\n`geom_smooth()` using formula = 'y ~ x'\n\n\n\n\n\n\n\nCode\ny = life_expectacy_usa_alzheimer_joined_bind_cumul_growth$CumulativeGrowth\nx = life_expectacy_usa_alzheimer_joined_bind_cumul_growth$`Average Life Expectancy (Years)...6`\n\nregression_model_cumul_growth &lt;- lm(y ~ x)\ncor.test(y,x)\n\n\n\n    Pearson's product-moment correlation\n\ndata:  y and x\nt = 8.0721, df = 17, p-value = 3.229e-07\nalternative hypothesis: true correlation is not equal to 0\n95 percent confidence interval:\n 0.7327329 0.9574688\nsample estimates:\n      cor \n0.8905535 \n\n\n\n\nCode\nsummary(regression_model_cumul_growth)\n\n\n\nCall:\nlm(formula = y ~ x)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-0.29072 -0.14903 -0.08177  0.09580  0.48217 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) -12.0523     1.5889  -7.586 7.47e-07 ***\nx             0.1913     0.0237   8.072 3.23e-07 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.2233 on 17 degrees of freedom\nMultiple R-squared:  0.7931,    Adjusted R-squared:  0.7809 \nF-statistic: 65.16 on 1 and 17 DF,  p-value: 3.229e-07\n\n\nAccording to CDC, the Alzheimer’s onset is around 60 years old. It’s interesting to note that there has been a steady increase in life expectancy for people born between 193 and 1952. Life expectancy rose from 61.1 to 68.6. The change in life expectancy is a bit less pronounced. Naturally, we see a very high positive correlation between deaths due to Alzheimer’s disease and the rise in life expectancy."
  }
]