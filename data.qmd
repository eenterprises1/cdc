# Data

The CDC Leading Causes of Death Data set is the primary data source for our project.

## Technical description

### Data collection

We will work with data related to deaths published by the Centers for Disease Control and Prevention (CDC). The data is collected by the Centers for Disease Control and Prevention (CDC), specifically by the National Center for Health Statistics (NCHS). This involves gathering mortality and population data from the National Vital Statistics System (NVSS), which receives information from state and local health departments in the United States.

### Description of the data

-   Format: The data set is publicly available in CSV files on the following website: [Link](https://wonder.cdc.gov/ucd-icd10.html)
-   Frequency: Annually updated from 1999 to 2020
-   Features: Key features include causes of death, demographic information (race, sex, age), and geographic location (state).
-   Dimensions: the data set provides the following metrics:
    -   Deaths: number of deaths that occurred in a specific year for a specific race, sex, or state.
    -   Population: the total population for that specific year, race, state, etc.
    -   Crude Death Rate: the number of deaths divided by the total population.
    -   Age-Adjusted Death Rate: number of deaths adjusted by age.
-   Specific description: The primary data set has 37290 rows and 8 columns.

It is important to differentiate between Age-Adjusted Death Rate, Deaths, and Crude Death Rate. While the three provide information about mortality, we will focus on the Age-Adjusted-Death-Rate. The **Crude Rate** measures the number of deaths in a given population divided by the size of that population.

$$
\text{Crude Rate} = \frac{\text{Number of Deaths}}{\text{Population}} 100,000
$$

An increase in the number of deaths will cause a rise in the Crude Death Rate. However, this can be misleading in populations with a growing number of elderly people, who naturally have a higher likelihood of dying.

On the other hand, the **Age-Adjusted Death Rate** is a mortality rate statistically modified to eliminate the effect of different age distributions in different populations. This rate allows comparisons between populations with different age structures. A good explanation of the difference can be found [here](https://www.health.ny.gov/diseases/chronic/ageadj.htm). As a formula, it can be defined as,

$$
\text{Age-Adj Death Rate} = \sum_{i \in \text{Age-Groups}} (w_i \times \text{CrudeRate}_i)\times 100,000
$$

The Age-Adjusted Death Rate is essentially a weighted average of Crude Rates for different age groups. In this metric, each additional death adds $w_i\times1$ to the total, whereas in the Crude Rate, its contribution is a fixed (and higher) value of $1$. For populations with a significant percentage of individuals aged 85 and above, the number of deaths is adjusted by the group's weight. This adjustment yields a metric that facilitates the comparison of mortality rates across diverse populations.

### Importing the Data

The data set can be obtained from the [CDC website](https://wonder.cdc.gov/ucd-icd10.html) in a CSV format. We will store the data set in the repository and import it into R using the read_csv() function.

### Data Analysis Limitations and Concerns

Overall, the data is consistent, and the figures appear accurate, with no inherent discrepancies observed. However, it's important to note that the CDC refrains from calculating Age-Adjusted Death Rates or Crude Death Rates when the total number of deaths is 10 or fewer, labeling these instances as 'Unreliable'. While the actual numbers in such cases would be minimal, it's reasonable to consider these 'Unreliable' values as zero for analytical purposes. We will speak more about this in the Missing value analysis section.

We can take a look at the first few rows of the data set:

```{r message=FALSE}
library(readr)
cdc_dataset = read_csv("NCHS_Leading_Causes_of_Death_United_States_2020.csv")
print(head(cdc_dataset, 10))
```

## Research plan

The comprehensive data on causes of death provided by the CDC, which includes crude and age-adjusted rates and death tolls by state, race, and year, serves as a solid foundation for addressing our research questions. First, we will distinguish what causes of death seem to be controlled against those growing in recent years. This will require us to compare time series and choose adequate metrics for comparison appropriately.

We will continue by going deeper into those causes that have been growing, and we will offer explanations for the shape or their trends. This will help policymakers have a clear understanding of the reasons behind the spikes in deaths and, ergo, offer adequate measures to control them.

Finally, we will explore the causes of death on a state-by-state and race basis. This will uncover states with disproportionately high death rates from specific causes, highlighting regions where healthcare investment may be urgently needed

## Missing value analysis

According to the [CDC](https://wonder.cdc.gov/wonder/help/ucd.html): "*Statistics representing fewer than ten persons (0-9) are suppressed. Rates are marked as "unreliable" when the death count is less than 20."* The reason is to protect individual privacy and confidentiality. This ensures that data cannot be used to identify or infer information about specific individuals, maintaining ethical standards in data handling and reporting.

For this reason, our data set contains N/A values in Age Adjusted Death Rate and Crude Rate for deaths lower than 20. Moreover, there are no entries having deaths less than 10. We can confirm this by looking at the summary() of the column Deaths being 10:

```{r, message=FALSE}
#Searching for the minimum value registered for Deaths
summary(cdc_dataset$Deaths)
```

This then confirms that the dataset consists of entries having Deaths higher or equal than 10.

Finally, we can see the distribution of Deaths for N/A's. The values should be higher than 10, and less or equal than 20. Otherwise there are inconsistencies:

```{r, message=FALSE}
# Load necessary library
library(ggplot2)

filtered_data <- subset(cdc_dataset, is.na(`Age Adjusted Rate`))
max_death <- max(filtered_data$Deaths, na.rm = TRUE)

ggplot(filtered_data, aes(x = Deaths)) +
  geom_histogram(binwidth = 1, boundary = 9, fill = "turquoise", color = "black") +
  scale_x_continuous(breaks = 9:max_death + 1) +
  labs(title = "Histogram of Deaths where Age Adjusted Death Rate is NA", x = "Deaths", y = "Frequency")+
  theme_minimal()

```

As we can see, the minimum value is 10 and the maximum is 19. This means that all NAs have values lower than 20 as the CDC stated. 


```{r, fig.height=7, fig.width= 6, message=FALSE}
#Libraries
library(ggplot2)
library(dplyr)

#Subset
na_count <- cdc_dataset %>%
  group_by(`Cause Name`) %>%
  summarise(NA_Count = sum(is.na(`Age Adjusted Rate`))) %>%
  arrange(desc(NA_Count))

#plot
ggplot(na_count, aes(x = NA_Count, y = reorder(`Cause Name`, NA_Count))) +
 geom_bar(stat = "identity", fill = "lightblue", color = 'black') +
  labs(title = "Count of NAs in Age Adjusted Rate by Cause", x = "Number of NAs", y = "Cause Name") +
  theme_minimal()


```

We suspect that Meningitis, Infections of kidney, Pneumoconioses, Legal intervention and Hyperplasia are the causes with more NA's given the inherent lower probability of dying because of these causes. If that's the case, we might safely treat NA's Age-Adjusted Death Rate and Crude Rates as zero, as in the worst case, they are very small numbers. We analyze the median of Age Adjusted Death Rate across the whole period (1999-2020):

```{r, message=FALSE}
median_data <- cdc_dataset %>%
  filter(`Cause Name` %in% c("Meningitis", "Infections of kidney", 
                             "Pneumoconioses and chemical effects", 
                             "Legal intervention", "Hyperplasia of prostate") & !is.na(`Age Adjusted Rate`)) %>%
  group_by(`Cause Name`) %>%
  summarise(Median = median(`Crude Rate`))

#Plotting bars:
ggplot(median_data, aes(x = reorder(`Cause Name`, -Median), y = Median)) +
  geom_bar(stat = "identity", fill = "#9c6e54", color = 'black') +
  labs(title = "Median of Crude Rate for Selected Causes", x = "Cause Name", y = "Median Crude Rate") +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```

In fact, we can see that Infections of kidney has the biggest magnitude and it is only a Crude Rate of 0.3. This means that the median value of deaths caused by Infections of kidney in the United States, is just 0.3 persons per 100,000 people. Or 3 in 1 million.


